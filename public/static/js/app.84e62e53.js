(function(t){function e(e){for(var i,l,s=e[0],r=e[1],c=e[2],u=0,p=[];u<s.length;u++)l=s[u],n[l]&&p.push(n[l][0]),n[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,s=1;s<a.length;s++){var r=a[s];0!==n[r]&&(i=!1)}i&&(o.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},n={app:0},o=[];function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("e2a1"),n=a.n(i);n.a},"0369":function(t,e,a){"use strict";var i=a("653f"),n=a.n(i);n.a},"036a":function(t,e,a){"use strict";var i=a("398d"),n=a.n(i);n.a},"098e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-main[data-v-35ef9f89]{padding:0 20px}.el-aside *[data-v-35ef9f89],.el-main *[data-v-35ef9f89]{margin:15px 0}",""])},"0e0e":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"ul[data-v-4ca4c258]{height:-webkit-fill-available}",""])},"13fb":function(t,e,a){var i=a("0e0e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("6e2abc6c",i,!0,{sourceMap:!1,shadowMode:!1})},"1ca0":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-6154cce9]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-6154cce9]{margin-left:5px}",""])},"1fe2":function(t,e,a){"use strict";var i=a("79f9"),n=a.n(i);n.a},"2b1e":function(t,e,a){var i=a("b4e9");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("483eb7a4",i,!0,{sourceMap:!1,shadowMode:!1})},"398d":function(t,e,a){var i=a("6192");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("5a862eeb",i,!0,{sourceMap:!1,shadowMode:!1})},"3ebd":function(t,e,a){"use strict";var i=a("7bb2"),n=a.n(i);n.a},"3f8c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;min-width:1210px}p{margin:0}textarea{height:inherit}.timingMain .el-dialog__body{border-top:1px solid #bbb;border-bottom:1px solid #bbb}.el-main{padding:20px 40px}.el-menu-item-group__title{padding:0}.workInfoShow audio,.workInfoShow img,.workInfoShow video{width:55%}",""])},"428c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-main .el-select[data-v-48b1aad8]{display:block}.el-main[data-v-48b1aad8]{padding:0 20px}.el-aside *[data-v-48b1aad8],.el-main *[data-v-48b1aad8]{margin:15px 0}",""])},5054:function(t,e,a){"use strict";var i=a("95ff"),n=a.n(i);n.a},"531b":function(t,e,a){"use strict";var i=a("2b1e"),n=a.n(i);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),n=a("5c96"),o=a.n(n),l=(a("0fae"),a("99ed"),a("9ce6")),s=a.n(l),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],d=(a("034f"),a("2877")),u={},p=Object(d["a"])(u,r,c,!1,null,null,null);p.options.__file="App.vue";var f=p.exports,m=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        媒体库\n                    ")])])],1),a("filter-list",{attrs:{listType:"media","filter-list":t.filterList},on:{filterMediaList:t.filterMediaList}}),a("div",{staticClass:"am-form-file"},[a("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"}},[t._v("上传")]),a("input",{ref:"myFiles",attrs:{type:"file",multiple:"",accept:"audio/mp3, video/mp4, image/jpg, image/png, image/gif"},on:{change:t.changeUploadList}})],1),a("media-list",{attrs:{"table-type":"media","media-list":t.mediaList,"current-page":t.currentPage},on:{delMediaInfo:t.delMediaInfo}})],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime},on:{hideTiming:function(e){t.isShowSetTime=!1}}}),a("el-dialog",{staticClass:"dialogUpload",attrs:{title:"上传文件",visible:t.dialogUploadVisible,width:"50%"},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[a("div",{staticStyle:{border:"1px solid #bbb","min-height":"200px"}},[a("div",{staticStyle:{padding:"10px"}},t._l(t.fileList,function(e,i){return a("div",{key:i},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("div",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.name))]),a("el-progress",{attrs:{"stroke-width":3,percentage:e.num,status:100===e.num?"success":"text"}},[t._v(t._s(e.num)+"%\n                                    ")])],1)]),a("el-col",{attrs:{span:4}},[a("div",[""!==e.id?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.jumpNewPage(e.id)}}},[t._v("查看\n                                    ")]):t._e()],1)])],1)],1)}),0)]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hideUploadDia}},[t._v("完成")])],1)])],1)],1)},v=[],g=(a("7f7f"),a("ac6a"),a("8615"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{padding:"25px 0"}},[a("el-col",[a("el-input",{staticStyle:{width:"25%"},attrs:{size:"small",placeholder:"搜索标题、摘要、字幕，支持中英文关键词","suffix-icon":"el-icon-search"},model:{value:t.filterList.title,callback:function(e){t.$set(t.filterList,"title",e)},expression:"filterList.title"}}),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"===t.listType,expression:"listType === 'media'"}],attrs:{"default-first-option":"",value:"",size:"small",placeholder:"分类（iFun iTalk..）"},model:{value:t.filterList.category,callback:function(e){t.$set(t.filterList,"category",e)},expression:"filterList.category"}},[a("el-option",{attrs:{label:"iFun",value:"fun"}}),a("el-option",{attrs:{label:"iTalk",value:"talk"}}),a("el-option",{attrs:{label:"iListen",value:"listen"}}),a("el-option",{attrs:{label:"iWords",value:"word"}})],1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"===t.listType,expression:"listType === 'media'"}],attrs:{placeholder:"来源",value:"",size:"small"},model:{value:t.filterList.source,callback:function(e){t.$set(t.filterList,"source",e)},expression:"filterList.source"}}),a("el-select",{attrs:{placeholder:"难度",value:"",size:"small"},model:{value:t.filterList.difficulty,callback:function(e){t.$set(t.filterList,"difficulty",e)},expression:"filterList.difficulty"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"初级",value:"1"}}),a("el-option",{attrs:{label:"中级",value:"2"}}),a("el-option",{attrs:{label:"高级",value:"3"}}),"talk"===t.listType?a("el-option",{attrs:{label:"彩蛋题",value:"4"}}):t._e()],1),a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",value:"",size:"small",placeholder:"标签"},model:{value:t.filterList.label,callback:function(e){t.$set(t.filterList,"label",e)},expression:"filterList.label"}}),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"!==t.listType,expression:"listType !== 'media'"}],attrs:{placeholder:"状态",value:"",size:"small"},model:{value:t.filterList.status,callback:function(e){t.$set(t.filterList,"status",e)},expression:"filterList.status"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"未发布",value:"1"}}),a("el-option",{attrs:{label:"待发布",value:"2"}}),a("el-option",{attrs:{label:"待发布",value:"3"}})],1),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.filterMediaList}},[t._v("查找")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.clearAll}},[t._v("清除筛选")])],1)],1)}),b=[],w={name:"filter-list-item",props:{listType:String,filterList:Object},data:function(){return{type:"",source:"",difficulty:"",label:"",status:""}},methods:{clearAll:function(){this.type="",this.source="",this.difficulty="",this.label="",this.status="all"},filterMediaList:function(){this.$emit("filterMediaList",this.filterList)}}},y=w,x=(a("036a"),Object(d["a"])(y,g,b,!1,null,"293f5774",null));x.options.__file="FilterListItem.vue";var _=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"timingMain",attrs:{title:"定时发布",visible:t.isShow,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"40%"},on:{"update:visible":function(e){t.isShow=e}}},[a("div",{staticStyle:{"min-height":"150px"}},[a("el-date-picker",{staticStyle:{"margin-right":"15px"},attrs:{size:"small",type:"date",placeholder:"选择日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("el-time-select",{attrs:{size:"small","picker-options":{start:"00:30",step:"00:30",end:"23:30"},placeholder:"选择时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideTiming}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setScheduledRelease}},[t._v("设 定")])],1)])},T=[],I=(a("28a5"),{props:{isShow:Boolean,id:String},data:function(){return{time:"",date:""}},mounted:function(){console.log(this.id)},methods:{hideTiming:function(){this.$emit("hideTiming",!1)},setScheduledRelease:function(){var t=this,e=this.time.split(":"),a=new FormData;a.append("lessonId",this.id),a.append("time",new Date(this.date).setHours(e[0],e[1],0)),this.$axios.post("/lesson/_public",a).then(function(e){e.data.code||(t.$message.success("设置成功"),t.$emit("hideTiming",!1))})}},watch:{id:function(t,e){}}}),S=I,L=(a("e97b"),Object(d["a"])(S,k,T,!1,null,"be2cd48a",null));L.options.__file="ReleaseTimingItem.vue";var M=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-aside",{attrs:{width:"200px"}},[a("el-row",{staticClass:"tac"},[a("el-col",[a("el-menu",{attrs:{"default-active":t.defaultActive,"default-openeds":["cms"],router:""},on:{open:t.handleOpen,close:t.handleClose}},[a("el-submenu",{attrs:{index:"cms"}},[a("template",{slot:"title"},[a("span",[t._v("CMS")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/",disabled:""}},[t._v("iFun")]),a("el-menu-item",{attrs:{index:"/iTalkList"}},[t._v("iTalk")]),a("el-menu-item",{attrs:{index:"/",disabled:""}},[t._v("iListen")]),a("el-menu-item",{attrs:{index:"/iWordsList"}},[t._v("iWords")])],1)],2),a("el-menu-item",{attrs:{index:"/mediaList"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("媒体库")])])],1)],1)],1)],1)},$=[],C={data:function(){return{defaultActive:"cms",defaultRoute:{MediaList:"/mediaList",EditMediaInfo:"/mediaList",IWordsList:"/iWordsList",EditIWordInfo:"/iWordsList",ITalkList:"/iTalkList",ShowITalkInfo:"/iTalkList"}}},mounted:function(){this.defaultActive=this.defaultRoute[this.$route.name]},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},D=C,F=(a("f2ae"),Object(d["a"])(D,z,$,!1,null,"4ca4c258",null));F.options.__file="LeftAsideItem.vue";var j=F.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.mediaList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"zhTitle",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.zhTitle))]}}])}),a("el-table-column",{attrs:{prop:"category",label:"类别"}}),a("el-table-column",{attrs:{prop:"difficulty",label:"难度"},scopedSlots:t._u([{key:"default",fn:function(e){return["simple"===e.row.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===e.row.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===e.row.difficulty?a("span",[t._v("高级")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"address",label:"状态","show-overflow-tooltip":""}}),"media"===t.tableType?a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.jumpPage("/editMediaInfo/"+e.row._id)}}},[t._v("编辑\n                ")]),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.delMediaInfo(e.row._id)}}},[t._v("\n                    刪除\n                ")])]}}])}):t._e()],1)],1)},O=[],U={props:{tableType:String,mediaList:Array,newRowList:Array},data:function(){return{test:{_id:"5c2212f49a87ab4ea5b8a3d4",fileId:"5c2212f49a87ab4ea5b8a3d3",zhTitle:"12",__v:0,category:"iTalk",difficulty:"simple",enVvt:"1",source:"upload",zhVvt:"1"}}},mounted:function(){},methods:{jumpPage:function(t){this.$router.push(t)},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},testToggleSelection:function(t){console.log(t);var e=[];this.mediaList.forEach(function(a){-1!==t.indexOf(a.fileId)&&(console.log(a),e.push(a))}),this.toggleSelection(e)},delMediaInfo:function(t){this.$emit("delMediaInfo",t)},clearSelect:function(){this.$refs.multipleTable.clearSelection()},handleSelectChange:function(t){this.$emit("select",t)}},watch:{}},W=U,V=(a("a092"),Object(d["a"])(W,P,O,!1,null,"20a3bbd9",null));V.options.__file="MediaListItem.vue";var E=V.exports,N={components:{FilterList:_,ReleaseTiming:M,LeftAside:j,MediaList:E},data:function(){return{mediaList:[],multipleSelection:[],currentPage:1,isShowSetTime:!1,fileList:[],dialogUploadVisible:!1,paginationNum:0,filterList:{}}},mounted:function(){this.init()},methods:{init:function(){this.getMediaListData()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getMediaListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},hideUploadDia:function(){this.fileList=[],this.dialogUploadVisible=!1},getMediaListData:function(t){var e=this;t=t||{},t.page=this.currentPage,this.$axios.get("/material/_find",{params:t}).then(function(t){t.data.code||(e.mediaList=t.data.data)}),this.getMediaNumData(t)},handleUploadChange:function(t,e,a){this.dialogUploadVisible=!0},filterMediaList:function(t){var e={page:1,category:t.category||"",enTitle:t.title||"",zhTitle:t.title||"",abstract:t.title||"",enVvt:t.title||"",zhVvt:t.title||"",difficulty:t.difficulty||""};this.getMediaListData(e)},getMediaNumData:function(t){var e=this;t=t||{},this.$axios.get("/material/_getnum",{params:t}).then(function(t){e.paginationNum=t.data.data})},changeUploadList:function(){var t=this,e=Object.values(this.$refs.myFiles.files);e.forEach(function(e){t.fileList.push({name:e.name,num:0,id:""})}),this.postUploadData(0,e)},postUploadData:function(t,e){var a=this,i=new FormData;i.append("file",e[t]),this.handleUploadChange(),this.$axios.post("/file/_upload",i,{onUploadProgress:function(e){this.fileList[t].num=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then(function(i){0===i.data.code&&i.data.data[0]&&(a.$message.success("上传成功"),a.fileList[t].id=i.data.data[0].material._id,a.getMediaListData(),t+=1,t<=e.length-1?a.postUploadData(t,e):a.$refs.myFiles.value="")})},jumpNewPage:function(t){window.open("#/editMediaInfo/"+t,"_blank")},delMediaInfo:function(t){var e=this;this.$confirm("文件将被直接删除,可能导致引用该媒体的文档失效。","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button el-button--danger"}).then(function(){e.delMediaData(t)}).catch(function(){})},delMediaData:function(t){var e=this;this.$axios.get("/material/_delete",{params:{materialId:t}}).then(function(t){t.data.code||(e.$message({type:"success",message:"已删除"}),e.init())})}}},A=N,R=(a("531b"),Object(d["a"])(A,h,v,!1,null,"56c3aa98",null));R.options.__file="MediaList.vue";var B=R.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("media-aside",{attrs:{"file-info":t.fileInfo}}),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",[t._v("基本信息")])]),a("el-col",{attrs:{span:5}},[a("div",[a("el-button",{attrs:{size:"small"},on:{click:t.postCreateCMSData}},[t._v("生成CMS文章")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.postMediaInfoData}},[t._v("保存")])],1)])],1),a("div",{staticStyle:{margin:"40px 0"}},[a("span",{staticClass:"typeTitle"},[t._v("课程")]),a("el-select",{attrs:{placeholder:"请选择",value:"",size:"mini"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},[a("el-option",{attrs:{label:"iFun",value:"iFun"}}),a("el-option",{attrs:{label:"iTalk",value:"iTalk"}}),a("el-option",{attrs:{label:"iListen",value:"iListen",disabled:""}}),a("el-option",{attrs:{label:"iWords",value:"iWord",disabled:""}})],1)],1),a("talk-info",{attrs:{type:t.currentType,form:t.iTalkForm}}),a("fun-info",{attrs:{type:t.currentType,form:t.iFunForm}})],1),a("el-footer")],1)],1)},q=[],J=(a("456d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return"iTalk"===t.type?a("el-container",[a("el-aside",{attrs:{width:"65%"}},[a("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.zhTitle,callback:function(e){t.$set(t.form,"zhTitle",e)},expression:"form.zhTitle"}}),a("el-input",{attrs:{placeholder:"中文字幕"},model:{value:t.form.zhVvt,callback:function(e){t.$set(t.form,"zhVvt",e)},expression:"form.zhVvt"}}),a("el-input",{attrs:{placeholder:"英文字幕"},model:{value:t.form.enVvt,callback:function(e){t.$set(t.form,"enVvt",e)},expression:"form.enVvt"}}),a("el-select",{attrs:{value:"",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}},t._l(t.labelList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-main",[a("el-select",{attrs:{placeholder:"难度",value:"",size:"mini"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[a("el-option",{attrs:{label:"初级",value:"simple"}}),a("el-option",{attrs:{label:"中级",value:"easily"}}),a("el-option",{attrs:{label:"高级",value:"difficulty"}}),a("el-option",{attrs:{label:"彩蛋题",value:"bonus"}})],1)],1)],1):t._e()}),Q=[],X={props:{type:String,form:Object},data:function(){return{labelList:[]}}},G=X,K=(a("c948"),Object(d["a"])(G,J,Q,!1,null,"35ef9f89",null));K.options.__file="TalkInfoItem.vue";var Y=K.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"iFun"===t.type?a("el-container",[a("el-aside",{attrs:{width:"65%"}},[a("el-input",{attrs:{placeholder:"中文标题"},model:{value:t.form.zhTitle,callback:function(e){t.$set(t.form,"zhTitle",e)},expression:"form.zhTitle"}}),a("el-input",{attrs:{placeholder:"英文标题"},model:{value:t.form.enTitle,callback:function(e){t.$set(t.form,"enTitle",e)},expression:"form.enTitle"}}),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"摘要"},model:{value:t.form.abstract,callback:function(e){t.$set(t.form,"abstract",e)},expression:"form.abstract"}}),a("el-select",{attrs:{value:"",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}},t._l(t.labelList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),a("el-input",{attrs:{placeholder:"中文字幕"},model:{value:t.form.zhVvt,callback:function(e){t.$set(t.form,"zhVvt",e)},expression:"form.zhVvt"}}),a("el-input",{attrs:{placeholder:"英文字幕"},model:{value:t.form.enVvt,callback:function(e){t.$set(t.form,"enVvt",e)},expression:"form.enVvt"}})],1),a("el-main",[a("el-select",{attrs:{placeholder:"分类",value:"",size:"mini"},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}},[a("el-option",{attrs:{label:"搞笑",value:"funny"}}),a("el-option",{attrs:{label:"电影",value:"movie"}}),a("el-option",{attrs:{label:"娱乐",value:"entertainment"}}),a("el-option",{attrs:{label:"文化",value:"culture"}}),a("el-option",{attrs:{label:"旅行",value:"travel"}}),a("el-option",{attrs:{label:"艺术",value:"arts"}}),a("el-option",{attrs:{label:"美食",value:"foods"}}),a("el-option",{attrs:{label:"运动",value:"sports"}}),a("el-option",{attrs:{label:"科技",value:"technology"}})],1),a("el-select",{attrs:{placeholder:"难度",value:"",size:"mini"},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[a("el-option",{attrs:{label:"初级",value:"simple"}}),a("el-option",{attrs:{label:"中级",value:"easily"}}),a("el-option",{attrs:{label:"高级",value:"difficulty"}})],1)],1)],1):t._e()},tt=[],et={props:{type:String,form:{type:Object,default:function(){return{}}}},data:function(){return{labelList:[]}},mounted:function(){}},at=et,it=(a("1fe2"),Object(d["a"])(at,Z,tt,!1,null,"48b1aad8",null));it.options.__file="FunInfoItem.vue";var nt=it.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-aside",{attrs:{width:"200px"}},[a("div",[a("div",{staticClass:"backBlock",on:{click:function(e){t.jumpPage("/mediaList")}}},[a("i",{staticClass:"el-icon-back"}),a("span",{staticClass:"backText"},[t._v("返回")])]),"mp4"===t.currentType?a("div",[a("video",{attrs:{controls:"",preload:"none",poster:"",width:"200"}},[a("source",{attrs:{src:t.fileInfo.fileUrl,type:"video/mp4"}})])]):t._e(),"jpg"===t.currentType||"png"===t.currentType?a("div",[a("img",{attrs:{src:t.fileInfo.fileUrl,width:"200",height:"100"}})]):t._e(),"mp3"===t.currentType?a("div",[a("audio",{staticStyle:{width:"200px",height:"100px"},attrs:{controls:"",preload:"none"}},[a("source",{attrs:{src:t.fileInfo.fileUrl}})])]):t._e(),a("div",{staticClass:"backBlock"},[a("div",{staticClass:"backBlock",on:{click:function(e){t.jumpPage("/editMediaInfo/"+t.$route.params.id)}}},[t._v("基本信息")]),a("div",{staticClass:"editBlock",on:{click:function(e){t.jumpPage("/editMaterialInfo/"+t.$route.params.id)}}},[t._v("编辑素材")])])])])},lt=[],st={props:{fileInfo:Object},data:function(){return{currentType:""}},mounted:function(){console.log(this.fileInfo)},methods:{jumpPage:function(t){console.log(t),this.$router.push(t)}},watch:{fileInfo:function(t,e){console.log(t),this.currentType=t.fileName.substring(t.fileName.length-3)}}},rt=st,ct=(a("9c91"),Object(d["a"])(rt,ot,lt,!1,null,"001cc908",null));ct.options.__file="MediaAsideItem.vue";var dt=ct.exports,ut={name:"edit-media-info",components:{TalkInfo:Y,FunInfo:nt,MediaAside:dt},data:function(){return{currentType:"iFun",iTalkForm:{},iFunForm:{},fileInfo:{}}},mounted:function(){this.getOneMediaData()},methods:{postCreateCMSData:function(t){var e=this;t=this.saveMediaInfo();var a=new FormData;delete t.label,t.materialId=this.$route.params.id,t.source="upload",t.status=0,t.category=this.currentType,Object.keys(t).forEach(function(e){a.append(e,t[e])}),this.$axios.post("/material/_createCMS",a).then(function(t){console.log(t),t.data.code||(e.$message.success("创建成功"),e.postMediaInfoData())})},getOneMediaData:function(){var t=this;this.$axios.get("/material/_getone",{params:{materialId:this.$route.params.id}}).then(function(e){console.log(e.data.data),e.data.code||(t.getMediaFormInfo(e),t.getOneFile(e.data.data.fileId))})},getOneFile:function(t){var e=this;this.$axios.get("/file/_getone",{params:{fileId:t}}).then(function(t){t.data.code||(e.fileInfo=t.data.data)})},getMediaFormInfo:function(t){if(t.data.data.category)switch(this.currentType=t.data.data.category,t.data.data.label=t.data.data.label||[],t.data.data.category){case"iFun":this.iFunForm=t.data.data;break;case"iTalk":this.iTalkForm=t.data.data;break}},saveMediaInfo:function(){var t={};switch(this.currentType){case"iFun":this.checkIFunForm()?t=this.iFunForm:this.$message.warning("请检查字段是否填写完整！");break;case"iTalk":this.checkITalkForm()?t=this.iTalkForm:this.$message.warning("请检查字段是否填写完整！");break}return t},checkITalkForm:function(){return this.iTalkForm.zhTitle&&this.iTalkForm.zhVvt&&this.iTalkForm.enVvt&&this.iTalkForm.difficulty},checkIFunForm:function(){return this.iFunForm.zhTitle&&this.iFunForm.enTitle&&this.iFunForm.abstract&&this.iFunForm.zhVvt&&this.iFunForm.enVvt&&this.iFunForm.class&&this.iFunForm.difficulty},postMediaInfoData:function(t){var e=this;t=this.saveMediaInfo();var a=new FormData;delete t.label,t.materialId=this.$route.params.id,t.source="upload",t.category=this.currentType,Object.keys(t).forEach(function(e){a.append(e,t[e])}),this.$axios.post("/material/_update",a).then(function(t){console.log(t),t.data.code||e.$message.success("更新成功")})}},watch:{iFunForm:function(t,e){console.log(t)}}},pt=ut,ft=(a("6fbd"),Object(d["a"])(pt,H,q,!1,null,"0495a1ee",null));ft.options.__file="EditMediaInfo.vue";var mt=ft.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("media-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",[t._v("编辑")])])],1),a("div",{staticClass:"videoInfo"},[a("embed",{attrs:{src:"https://player.youku.com/player.php/sid/XMTQ3MjM5Mjc0MA==/v.swf",allowFullScreen:"true",quality:"high",width:"732",height:"403",align:"middle",allowScriptAccess:"always",type:"application/x-shockwave-flash"}})]),a("div",[a("el-button",{staticClass:"addManual",attrs:{plain:"",size:"mini"}},[t._v("添加手动裁剪")]),a("el-dropdown",{attrs:{trigger:"click"}},[a("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n                        自动切分为iTalk\n                    ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("每一句")]),a("el-dropdown-item",[t._v("每二句")])],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowCut,expression:"isShowCut"}],staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"}},[t._v("切分")])],1),a("div",{staticClass:"cutList"},[a("div",{staticClass:"manual"},[a("div",{staticClass:"manualTitle"},[t._v("手动裁剪")]),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1)],1),a("div",[a("div",{staticClass:"manualTitle"},[t._v("自动切分iTalk (42个片段)")]),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1)],1)])],1),a("el-footer")],1)],1)},vt=[],gt={name:"edit-media-info",components:{MediaAside:dt},data:function(){return{isShowCut:!1}}},bt=gt,wt=(a("0369"),Object(d["a"])(bt,ht,vt,!1,null,"e264fbc6",null));wt.options.__file="EditMaterialInfo.vue";var yt=wt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        iWords\n                    ")])])],1),a("filter-list",{attrs:{listType:"word",filterList:t.filterList}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.jumpPage("/editIWordInfo/new")}}},[t._v("添加")]),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.wordsList,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),a("el-table-column",{attrs:{prop:"_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"difficulty",label:"难度"},scopedSlots:t._u([{key:"default",fn:function(e){return["simple"===e.row.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===e.row.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===e.row.difficulty?a("span",[t._v("高级")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",[t._v("未发布")]):t._e(),1===e.row.status?a("span",[t._v("待发布")]):t._e(),2===e.row.status?a("span",[t._v("已发布")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.jumpPage("/editIWordInfo/"+e.row._id)}}},[t._v("编辑\n                        ")]),a("el-dropdown",{staticClass:"dropdown-edit",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                            发布"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"release",value:e.row}}},[t._v("发布")]),a("el-dropdown-item",{attrs:{command:{key:"time",value:e.row}}},[t._v("定时发布")])],1)],1)]}}])})],1)],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.currentId},on:{hideTiming:function(e){t.isShowSetTime=!1}}})],1)],1)},_t=[],kt={components:{FilterList:_,ReleaseTiming:M,LeftAside:j},data:function(){return{wordsList:[],multipleSelection:[],currentPage:1,isShowSetTime:!1,paginationNum:0,filterList:{},currentId:""}},mounted:function(){this.init()},methods:{init:function(){this.getWordsListData(),this.getWordsNumData()},getWordsListData:function(){var t=this;this.$axios.get("/lesson/_find",{params:{page:this.currentPage,category:"iWord"}}).then(function(e){console.log(e),e.data.code||(t.wordsList=e.data.data)})},getWordsNumData:function(){var t=this;this.$axios.get("/lesson/_getnum",{params:{page:this.currentPage,category:"iWord"}}).then(function(e){t.paginationNum=e.data.data})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getWordsListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key?(this.isShowSetTime=!0,this.currentId=t.value._id):this.postUpdateWordData(t.value)},postUpdateWordData:function(t){var e=this,a=new FormData;a.append("lessonId",t._id),a.append("status",2),this.$axios.post("/lesson/_update",a).then(function(t){console.log(t),t.data.code||e.getWordsListData()})}}},Tt=kt,It=(a("3ebd"),Object(d["a"])(Tt,xt,_t,!1,null,"6154cce9",null));It.options.__file="IWordsList.vue";var St=It.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"标题",size:"mini"},model:{value:t.iWordTitle,callback:function(e){t.iWordTitle=e},expression:"iWordTitle"}})],1),a("div",{staticStyle:{float:"right"}},[a("div",[a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{size:"small"},on:{click:t.postWordsData}},[t._v("保存草稿\n                        ")]),a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"small",trigger:"click"},on:{click:t.postReleaseData,command:t.handleCommand}},[t._v("发布\n                            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"time",value:""}}},[t._v("定时发布")])],1)],1)],1)])],1),a("el-row",{staticClass:"workInfoMain",attrs:{type:"flex"}},[a("el-col",{attrs:{span:11}},[a("p",[t._v("Markdown\n                        "),a("el-button",{staticStyle:{"margin-left":"30px",padding:"0"},attrs:{type:"text"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("插入媒体\n                        ")])],1),a("div",[a("el-input",{style:{height:t.currentHeight+"px"},attrs:{id:"markdownInfo",type:"textarea"},on:{change:t.changeMarkDown},model:{value:t.markdownInfo,callback:function(e){t.markdownInfo=e},expression:"markdownInfo"}})],1)]),a("el-col",{attrs:{span:11,offset:1}},[a("p",[t._v("渲染预览")]),a("div",{staticClass:"workInfoShow",style:{height:t.currentHeight+"px"}},[a("vue-markdown",{staticClass:"markdownInfo",attrs:{source:t.showInfo}})],1)])],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.$route.params.id},on:{hideTiming:t.hideTimer}})],1),a("el-dialog",{attrs:{title:"媒体库",width:"95%",top:"5vh","before-close":t.hideMediaDia,visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("filter-list",{attrs:{listType:"media","filter-list":t.filterList},on:{filterMediaList:t.filterMediaList}}),a("div",{staticClass:"am-form-file"},[a("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"}},[t._v("上传")]),a("input",{ref:"myFiles",attrs:{type:"file",multiple:"",accept:"audio/mp3,video/mp4,image/jpg,image/png"},on:{change:t.changeUploadList}})],1),a("media-list",{ref:"mediaListDia",attrs:{"table-type":"mediaDia","new-row-list":t.newRowList,"media-list":t.mediaList,"current-page":t.currentPage},on:{select:t.handleSelectChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.createMDInfo}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"dialogUpload",attrs:{title:"上传文件",visible:t.dialogUploadVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"before-close":t.hideUploadDia,width:"50%"},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[a("div",{staticStyle:{border:"1px solid #bbb","min-height":"200px"}},[a("div",{staticStyle:{padding:"10px"}},t._l(t.fileList,function(e,i){return a("div",{key:i},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("div",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.name))]),a("el-progress",{attrs:{"stroke-width":3,percentage:e.num,status:100===e.num?"success":"text"}},[t._v(t._s(e.num)+"%\n                                    ")])],1)]),a("el-col",{attrs:{span:4}},[a("div",[""!==e.id?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.jumpNewPage(e.id)}}},[t._v("查看\n                                    ")]):t._e()],1)])],1)],1)}),0)]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hideUploadDia}},[t._v("完成")])],1)])],1)],1)},Mt=[],zt=(a("a481"),a("4917"),a("5df3"),{components:{ReleaseTiming:M,LeftAside:j,FilterList:_,MediaList:E},data:function(){return{iWordTitle:"",markdownInfo:"",currentHeight:0,showInfo:"",isShowSetTime:!1,dialogTableVisible:!1,dialogUploadVisible:!1,filterList:{},mediaList:[],currentPage:1,paginationNum:0,currentSelect:[],fileList:[],newRowList:[]}},mounted:function(){this.init()},methods:{init:function(){this.currentHeight=window.innerHeight-250,"new"!==this.$route.params.id&&this.getOneWordsData(),this.getMediaList()},getMediaList:function(t){var e=this;this.getMediaListData(t).then(function(a){e.mediaList=a,e.getMediaNumData(t)})},getMediaListData:function(t){var e=this;return t=t||{},t.page=this.currentPage,new Promise(function(a,i){e.$axios.get("/material/_find",{params:t}).then(function(t){t.data.code||a(t.data.data)})})},getMediaNumData:function(t){var e=this;t=t||{},this.$axios.get("/material/_getnum",{params:t}).then(function(t){e.paginationNum=t.data.data})},changeUploadList:function(){var t=this,e=Object.values(this.$refs.myFiles.files);e.forEach(function(e){t.fileList.push({name:e.name,num:0,id:""})}),this.postUploadData(0,e)},handleUploadChange:function(t,e,a){this.dialogUploadVisible=!0},postUploadData:function(t,e){var a=this,i=new FormData;i.append("file",e[t]),this.handleUploadChange(),this.$axios.post("/file/_upload",i,{onUploadProgress:function(e){this.fileList[t].num=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then(function(i){0===i.data.code&&i.data.data[0]&&(a.$message.success("上传成功"),a.fileList[t].id=i.data.data[0].material._id,a.getMediaListData().then(function(t){a.mediaList=t,setTimeout(function(){a.newRowList.push(i.data.data[0].material.fileId),a.$refs.mediaListDia.testToggleSelection(a.newRowList)},0)}),t+=1,t<=e.length-1?a.postUploadData(t,e):a.$refs.myFiles.value="")})},jumpNewPage:function(t){window.open("#/editMediaInfo/"+t,"_blank")},hideTimer:function(){this.isShowSetTime=!1,this.postUpdateWordsData()},hideUploadDia:function(){console.log("0----hide"),this.fileList=[],this.dialogUploadVisible=!1},hideMediaDia:function(){this.$refs.mediaListDia.clearSelect(),console.log("1----hide"),this.newRowList=[],this.dialogTableVisible=!1},getOneWordsData:function(){var t=this;this.$axios.get("/lesson/_getone",{params:{lessonId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e.data.data),t.iWordTitle=e.data.data.title||"",t.markdownInfo=e.data.data.cms)})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getMediaList()},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},filterMediaList:function(){},postWordsData:function(){"new"===this.$route.params.id?this.postAddWordsData(0):this.postUpdateWordsData()},postAddWordsData:function(t){var e=this,a=new FormData;a.append("cms",this.markdownInfo),a.append("zhTitle",this.iWordTitle),a.append("category","iWord"),a.append("status",t),this.$axios.post("/lesson/_add",a).then(function(t){console.log(t),t.data.code||(e.$message.success("添加成功"),e.jumpPage("/editIWordInfo/"+t.data.data._id))})},postUpdateWordsData:function(){var t=this,e=new FormData;e.append("lessonId",this.$route.params.id),e.append("cms",this.markdownInfo),e.append("zhTitle",this.iWordTitle),this.$axios.post("/lesson/_update",e).then(function(e){console.log(e),e.data.code||t.$message.success("更新成功")})},postReleaseData:function(){var t=this;if("new"===this.$route.params.id)return this.postAddWordsData(2);var e=new FormData;e.append("lessonId",this.$route.params.id),e.append("cms",this.markdownInfo),e.append("zhTitle",this.iWordTitle),e.append("status",2),console.log(this.$route.params.id),this.$axios.post("/lesson/_update",e).then(function(e){e.data.code||t.$message.success("发布成功")})},jumpPage:function(t){this.$router.push(t)},handleSelectChange:function(t){var e=this,a=[];t.forEach(function(t){a.push(e.getOneFile(t.fileId))}),Promise.all(a).then(function(t){console.log(t),e.currentSelect=t})},getOneFile:function(t){var e=this;return new Promise(function(a,i){e.$axios.get("/file/_getone",{params:{fileId:t}}).then(function(t){t.data.code||a(t.data.data)})})},createMDInfo:function(){var t=document.querySelector("#markdownInfo"),e=t.selectionEnd;t.focus();var a="";this.currentSelect.forEach(function(t){var e=t.fileName.substring(t.fileName.length-4);".mp3"===e.toLowerCase()?a+="\n![audio]("+t.fileUrl+")\n":".mp4"===e.toLowerCase()?a+="\n![video]("+t.fileUrl+")\n":".jpg"===e.toLowerCase()?a+="\n![pic]("+t.fileUrl+")\n":".png"===e.toLowerCase()&&(a+="\n![pic]("+t.fileUrl+")\n")}),this.markdownInfo=this.markdownInfo.substr(0,e)+a+this.markdownInfo.substr(e,this.markdownInfo.length-1),this.hideMediaDia()},changeMarkDown:function(){var t=this.markdownInfo,e=t.match(/!+\[audio]\(([^)]*)\)/gi)||[];e.forEach(function(e){var a=e.split(/\(\|\)/)[1],i='<audio  controls="" preload="none"><source src="'.concat(a,'"></audio>');t=t.replace(e,i)});var a=t.match(/!+\[video]\(([^)]*)\)/gi)||[];a.forEach(function(e){var a=e.split(/\(\|\)/)[1],i='<video  controls="" preload="none"><source src="'.concat(a,'" type="video/mp4"></video>');t=t.replace(e,i)}),this.showInfo=t}},watch:{markdownInfo:function(t,e){this.changeMarkDown()}}}),$t=zt,Ct=(a("e888"),Object(d["a"])($t,Lt,Mt,!1,null,"68328a0c",null));Ct.options.__file="EditIWordInfo.vue";var Dt=Ct.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        iTalkList\n                    ")])])],1),a("filter-list",{attrs:{listType:"talk","filter-list":t.filterList}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.talkList,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),a("el-table-column",{attrs:{prop:"_id",label:"ID"}}),a("el-table-column",{attrs:{prop:"difficulty",label:"难度"},scopedSlots:t._u([{key:"default",fn:function(e){return["simple"===e.row.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===e.row.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===e.row.difficulty?a("span",[t._v("高级")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",[t._v("未发布")]):t._e(),1===e.row.status?a("span",[t._v("待发布")]):t._e(),2===e.row.status?a("span",[t._v("已发布")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.jumpPage("/showITalkInfo/"+e.row._id)}}},[t._v("编辑")]),a("el-dropdown",{staticClass:"dropdown-edit",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                            发布"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"release",value:""}}},[t._v("发布")]),a("el-dropdown-item",{attrs:{command:{key:"time",value:""}}},[t._v("定时发布")])],1)],1)]}}])})],1)],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime},on:{hideTiming:function(e){t.isShowSetTime=!1}}})],1)],1)},jt=[],Pt={components:{FilterList:_,ReleaseTiming:M,LeftAside:j},data:function(){return{talkList:[],multipleSelection:[],currentPage:1,isShowSetTime:!1,filterList:{},paginationNum:0}},mounted:function(){this.init()},methods:{init:function(){this.getTalkListData(),this.getTalkNumData()},getTalkListData:function(){var t=this;this.$axios.get("/lesson/_find",{params:{page:this.currentPage,category:"iTalk"}}).then(function(e){console.log(e),e.data.code||(t.talkList=e.data.data)})},getTalkNumData:function(){var t=this;this.$axios.get("/lesson/_getnum",{params:{page:this.currentPage,category:"iTalk"}}).then(function(e){t.paginationNum=e.data.data})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getTalkListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){console.log(t),"time"===t.key&&(this.isShowSetTime=!0)}}},Ot=Pt,Ut=(a("5054"),Object(d["a"])(Ot,Ft,jt,!1,null,"14b8d898",null));Ut.options.__file="ITalkList.vue";var Wt=Ut.exports,Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.talkInfo.title)+"\n                ")]),a("div",{staticStyle:{float:"right"}},[a("div",[a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.jumpPage("/editMediaInfo/"+t.currentMediaId)}}},[t._v("查看源素材\n                        ")]),a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"small",trigger:"click"},on:{command:t.handleCommand}},[t._v("发布\n                            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"time",value:""}}},[t._v("定时发布")])],1)],1)],1)])],1),a("el-row",{staticClass:"talkInfo"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("难度")]),a("div",[t._v("英文字幕")]),a("div",[t._v("标签")])]),a("el-col",{attrs:{span:12}},[a("div",["simple"===t.talkInfo.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===t.talkInfo.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===t.talkInfo.difficulty?a("span",[t._v("高级")]):t._e(),"bonus"===t.talkInfo.difficulty?a("span",[t._v("彩蛋题")]):t._e()]),a("div",[t._v("\n                        "+t._s(t.talkInfo.enVvt||"--")+"\n                    ")]),a("div",[t._v(t._s(t.talkInfo.label||"--"))])])],1),"mp4"===t.currentType?a("div",[a("video",{attrs:{controls:"",preload:"none",poster:"",width:"480",height:"400"}},[a("source",{attrs:{src:t.fileInfo.fileUrl,type:"video/mp4"}})])]):t._e(),"jpg"===t.currentType||"png"===t.currentType?a("div",[a("img",{attrs:{src:t.fileInfo.fileUrl,width:"480",height:"400"}})]):t._e(),"mp3"===t.currentType?a("div",[a("audio",{staticStyle:{width:"480px",height:"400px"},attrs:{controls:"",preload:"none"}},[a("source",{attrs:{src:t.fileInfo.fileUrl}})])]):t._e(),a("release-timing",{attrs:{isShow:t.isShowSetTime},on:{hideTiming:function(e){t.isShowSetTime=!1}}})],1)],1)],1)},Et=[],Nt={components:{ReleaseTiming:M,LeftAside:j},data:function(){return{isShowSetTime:!1,currentType:"",talkInfo:{},currentMediaId:""}},mounted:function(){this.getOneTalkData()},methods:{jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},getOneTalkData:function(){var t=this;this.$axios.get("/lesson/_getone",{params:{lessonId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e.data.data),t.talkInfo=e.data.data,t.currentMediaId=e.data.data.materialId,t.getOneMediaData(e.data.data.materialId))})},getOneMediaData:function(t){var e=this;this.$axios.get("/material/_getone",{params:{materialId:t}}).then(function(t){t.data.code||e.getOneFile(t.data.data.fileId)})},getOneFile:function(t){var e=this;this.$axios.get("/file/_getone",{params:{fileId:t}}).then(function(t){t.data.code||(e.currentType=t.data.data.fileName.substring(t.data.data.fileName.length-3),e.fileInfo=t.data.data)})}}},At=Nt,Rt=(a("b242"),Object(d["a"])(At,Vt,Et,!1,null,"3176c70a",null));Rt.options.__file="ShowITalkInfo.vue";var Bt=Rt.exports;i["default"].use(m["a"]);var Ht=new m["a"]({routes:[{path:"/",name:"MediaList",component:B},{path:"/mediaList",name:"MediaList",component:B},{path:"/editMediaInfo/:id",name:"EditMediaInfo",component:mt},{path:"/editMaterialInfo/:id",name:"EditMaterialInfo",component:yt},{path:"/iWordsList",name:"IWordsList",component:St},{path:"/editIWordInfo/:id",name:"EditIWordInfo",component:Dt},{path:"/iTalkList",name:"ITalkList",component:Wt},{path:"/showITalkInfo/:id",name:"ShowITalkInfo",component:Bt}]}),qt=a("2f62");i["default"].use(qt["a"]);var Jt=new qt["a"].Store({state:{},mutations:{},actions:{}}),Qt=a("bc3a"),Xt=a.n(Qt),Gt=a("a7fe"),Kt=a.n(Gt);i["default"].config.productionTip=!1,i["default"].use(o.a),i["default"].use(Kt.a,Xt.a),i["default"].component("VueMarkdown",s.a),Xt.a.defaults.baseURL="http://188.131.179.172:16000",Xt.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded",i["default"].prototype.$axios=Xt.a,new i["default"]({router:Ht,store:Jt,render:function(t){return t(f)}}).$mount("#app")},"5ca8":function(t,e,a){var i=a("be4a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("3a20fc1d",i,!0,{sourceMap:!1,shadowMode:!1})},"5d0f":function(t,e,a){var i=a("bd78");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("2dfc584e",i,!0,{sourceMap:!1,shadowMode:!1})},6192:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-select[data-v-293f5774]{width:150px;margin:0 5px}",""])},"653f":function(t,e,a){var i=a("c21b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("36719048",i,!0,{sourceMap:!1,shadowMode:!1})},"6fbd":function(t,e,a){"use strict";var i=a("5d0f"),n=a.n(i);n.a},7361:function(t,e,a){var i=a("a650");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("d3745100",i,!0,{sourceMap:!1,shadowMode:!1})},"79f9":function(t,e,a){var i=a("428c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("f25f3c1e",i,!0,{sourceMap:!1,shadowMode:!1})},"7bb2":function(t,e,a){var i=a("1ca0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("70b4d606",i,!0,{sourceMap:!1,shadowMode:!1})},"7cd3":function(t,e,a){var i=a("f5bb");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("22384a7b",i,!0,{sourceMap:!1,shadowMode:!1})},9466:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".backBlock[data-v-001cc908]{padding:20px;font-size:14px}.backText[data-v-001cc908]{margin-left:10px}.editBlock[data-v-001cc908]{padding:0 20px}aside[data-v-001cc908]{width:200px;height:-webkit-fill-available;border-right:1px solid #e6e6e6}",""])},"95ff":function(t,e,a){var i=a("ed42");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("16ccddac",i,!0,{sourceMap:!1,shadowMode:!1})},"99ed":function(t,e,a){var i=a("f87e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("05dcb2b2",i,!0,{sourceMap:!1,shadowMode:!1})},"9c91":function(t,e,a){"use strict";var i=a("a2a2"),n=a.n(i);n.a},a092:function(t,e,a){"use strict";var i=a("5ca8"),n=a.n(i);n.a},a2a2:function(t,e,a){var i=a("9466");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("5336e962",i,!0,{sourceMap:!1,shadowMode:!1})},a650:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".talkInfo[data-v-3176c70a]{font-size:12px;padding:20px 0}.talkInfo div[data-v-3176c70a]{margin:15px 0}",""])},ae1c:function(t,e,a){var i=a("b930");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("7bd2da13",i,!0,{sourceMap:!1,shadowMode:!1})},b242:function(t,e,a){"use strict";var i=a("7361"),n=a.n(i);n.a},b4e9:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".am-form-file[data-v-56c3aa98]{position:relative;overflow:hidden}.am-form-file input[type=file][data-v-56c3aa98]{position:absolute;z-index:1;left:0;opacity:0;width:56px;height:28px;cursor:pointer}",""])},b930:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"",""])},bd78:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".sourceInfo[data-v-0495a1ee]{color:#888;font-size:14px;text-align:left;margin:20px 0}.typeTitle[data-v-0495a1ee]{margin-right:15px;font-size:14px}",""])},be4a:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"",""])},c21b:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".cutList[data-v-e264fbc6]{padding:40px 0}.videoInfo[data-v-e264fbc6]{margin:40px 0}.addManual[data-v-e264fbc6]{margin-right:15px}.manual[data-v-e264fbc6]{margin-bottom:40px}.manualTitle[data-v-e264fbc6]{color:#a8a8a8;font-size:12px;text-align:left}.manualList[data-v-e264fbc6]{margin-top:10px}",""])},c948:function(t,e,a){"use strict";var i=a("f91c"),n=a.n(i);n.a},e2a1:function(t,e,a){var i=a("3f8c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("1f50beb8",i,!0,{sourceMap:!1,shadowMode:!1})},e888:function(t,e,a){"use strict";var i=a("7cd3"),n=a.n(i);n.a},e97b:function(t,e,a){"use strict";var i=a("ae1c"),n=a.n(i);n.a},ed42:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-14b8d898]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-14b8d898]{margin-left:5px}",""])},f2ae:function(t,e,a){"use strict";var i=a("13fb"),n=a.n(i);n.a},f5bb:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".workInfoMain[data-v-68328a0c]{margin-top:46px;font-size:13px}.workInfoMain p[data-v-68328a0c]{margin-bottom:8px}.workInfoShow[data-v-68328a0c]{overflow-y:auto;border:1px solid #dcdfe6;border-radius:5px;min-height:20px}.markdownInfo[data-v-68328a0c]{padding:5px 15px}.am-form-file[data-v-68328a0c]{position:relative;overflow:hidden}.am-form-file input[type=file][data-v-68328a0c]{position:absolute;z-index:1;left:0;opacity:0;width:56px;height:28px;cursor:pointer}",""])},f87e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}",""])},f91c:function(t,e,a){var i=a("098e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("260d8dba",i,!0,{sourceMap:!1,shadowMode:!1})}});
//# sourceMappingURL=app.84e62e53.js.map