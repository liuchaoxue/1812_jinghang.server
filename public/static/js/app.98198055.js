(function(t){function e(e){for(var i,s,l=e[0],r=e[1],c=e[2],u=0,f=[];u<l.length;u++)s=l[u],n[s]&&f.push(n[s][0]),n[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,l=1;l<a.length;l++){var r=a[l];0!==n[r]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},o=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("e2a1"),n=a.n(i);n.a},"0595":function(t,e,a){"use strict";var i=a("f82b"),n=a.n(i);n.a},"0924":function(t,e,a){var i=a("960d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("77d9adc2",i,!0,{sourceMap:!1,shadowMode:!1})},"1ff0":function(t,e,a){"use strict";var i=a("5571"),n=a.n(i);n.a},"20b8":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-2b83d78e]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-2b83d78e]{margin-left:15px}",""])},"23fb":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".textString[data-v-71aa4acd]{font-size:14px;color:#c0c4cc;line-height:21px;padding-top:4px}",""])},"2f13":function(t,e,a){var i=a("6811");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("4c72ab24",i,!0,{sourceMap:!1,shadowMode:!1})},"35a8":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-38772092]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-38772092]{margin-left:15px}.table-secondary[data-v-38772092]{font-size:12px;color:#909399}",""])},"3c58":function(t,e,a){var i=a("f84e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("6d7e844d",i,!0,{sourceMap:!1,shadowMode:!1})},"3e87":function(t,e,a){var i=a("f836");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("570d669a",i,!0,{sourceMap:!1,shadowMode:!1})},"3f8c":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"#app{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;min-width:1210px}p{margin:0}textarea{height:inherit}.timingMain .el-dialog__body{border-top:1px solid #bbb;border-bottom:1px solid #bbb}.el-main{padding:20px 40px}.el-menu-item-group__title{padding:0}.workInfoShow audio,.workInfoShow img,.workInfoShow video{width:55%}",""])},4131:function(t,e,a){"use strict";var i=a("8f30"),n=a.n(i);n.a},"480a":function(t,e,a){var i=a("65b7");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("2d466be2",i,!0,{sourceMap:!1,shadowMode:!1})},5571:function(t,e,a){var i=a("c64f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("72bdc354",i,!0,{sourceMap:!1,shadowMode:!1})},"55ac":function(t,e,a){var i=a("a53e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("64762478",i,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),n=a("5c96"),o=a.n(n),s=(a("0fae"),a("99ed"),a("9ce6")),l=a.n(s),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],d=(a("034f"),a("2877")),u={},f=Object(d["a"])(u,r,c,!1,null,null,null);f.options.__file="App.vue";var p=f.exports,m=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        媒体库\n                    ")])])],1),a("filter-list",{attrs:{listType:"media","filter-list":t.filterList,"label-list":t.labelList},on:{filterAllList:t.filterMediaList}}),a("div",{staticClass:"am-form-file"},[a("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"}},[t._v("上传")]),a("input",{ref:"myFiles",attrs:{type:"file",multiple:"",accept:"audio/mp3, video/mp4, image/jpg, image/png, image/gif"},on:{change:t.changeUploadList}}),a("div",{staticStyle:{float:"right","font-size":"14px"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"排序",value:"",size:"mini"},on:{change:t.init},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},[a("el-option",{attrs:{label:"更新时间",value:"1"}}),a("el-option",{attrs:{label:"字幕长度正序",value:"2"}}),a("el-option",{attrs:{label:"字幕长度倒序",value:"3"}})],1)],1)],1),a("media-list",{attrs:{"table-type":"media","media-list":t.mediaList,"current-page":t.currentPage},on:{delMediaInfo:t.delMediaInfo}})],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.paginationSize,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("el-dialog",{staticClass:"dialogUpload",attrs:{title:"上传文件",visible:t.dialogUploadVisible,width:"50%"},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[a("div",{staticStyle:{border:"1px solid #bbb","min-height":"200px"}},[a("div",{staticStyle:{padding:"10px"}},t._l(t.fileList,function(e,i){return a("div",{key:i},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("div",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.name))]),a("el-progress",{attrs:{"stroke-width":3,percentage:e.num,status:100===e.num?"success":"text"}},[t._v(t._s(e.num)+"%\n                                    ")])],1)]),a("el-col",{attrs:{span:4}},[a("div",[""!==e.id?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.jumpNewPage(e.id)}}},[t._v("查看\n                                    ")]):t._e()],1)])],1)],1)}),0)]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hideUploadDia}},[t._v("完成")])],1)])],1)],1)},g=[],v=(a("7f7f"),a("ac6a"),a("8615"),a("c5f6"),a("55dd"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{padding:"25px 0"}},[a("el-col",[a("el-input",{staticStyle:{width:"25%"},attrs:{size:"small",placeholder:"搜索标题、摘要、字幕，支持中英文关键词","suffix-icon":"el-icon-search"},model:{value:t.filterList.title,callback:function(e){t.$set(t.filterList,"title",e)},expression:"filterList.title"}}),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"===t.listType,expression:"listType === 'media'"}],attrs:{"default-first-option":"",value:"",size:"small",placeholder:"类型（iFun iTalk..）"},model:{value:t.filterList.category,callback:function(e){t.$set(t.filterList,"category",e)},expression:"filterList.category"}},[a("el-option",{attrs:{label:"iFun",value:"iFun"}}),a("el-option",{attrs:{label:"iTalk",value:"iTalk"}}),a("el-option",{attrs:{label:"iListen",value:"iListen"}}),a("el-option",{attrs:{label:"iWords",value:"iWord"}})],1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"fun"===t.listType,expression:"listType === 'fun'"}],attrs:{placeholder:"分类",value:"",size:"small"},model:{value:t.filterList.class,callback:function(e){t.$set(t.filterList,"class",e)},expression:"filterList.class"}},t._l(t.iFunTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"word"===t.listType,expression:"listType === 'word'"}],attrs:{placeholder:"分类",value:"",size:"small"},model:{value:t.filterList.class,callback:function(e){t.$set(t.filterList,"class",e)},expression:"filterList.class"}},t._l(t.iWordTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1),a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",value:"",size:"small",placeholder:"标签"},model:{value:t.filterList.label,callback:function(e){t.$set(t.filterList,"label",e)},expression:"filterList.label"}},t._l(t.labelList,function(t){return a("el-option",{key:t._id,attrs:{label:t.label,value:t.label}})}),1),a("el-select",{attrs:{placeholder:"难度",value:"",size:"small"},model:{value:t.filterList.difficulty,callback:function(e){t.$set(t.filterList,"difficulty",e)},expression:"filterList.difficulty"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"初级",value:"simple"}}),a("el-option",{attrs:{label:"中级",value:"easily"}}),a("el-option",{attrs:{label:"高级",value:"difficulty"}}),"talk"===t.listType||"media"===t.listType?a("el-option",{attrs:{label:"彩蛋题",value:"bonus"}}):t._e(),"talk"===t.listType||"media"===t.listType?a("el-option",{attrs:{label:"其他",value:"other"}}):t._e()],1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"!==t.listType,expression:"listType !== 'media'"}],attrs:{placeholder:"状态",value:"",size:"small"},model:{value:t.filterList.status,callback:function(e){t.$set(t.filterList,"status",e)},expression:"filterList.status"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"未发布",value:"1"}}),a("el-option",{attrs:{label:"待发布",value:"2"}}),a("el-option",{attrs:{label:"待发布",value:"3"}})],1),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"media"===t.listType,expression:"listType === 'media'"}],attrs:{placeholder:"状态",value:"",size:"small"},model:{value:t.filterList.stage,callback:function(e){t.$set(t.filterList,"stage",e)},expression:"filterList.stage"}},[a("el-option",{attrs:{label:"全部",value:"all"}}),a("el-option",{attrs:{label:"未生成",value:"0"}}),a("el-option",{attrs:{label:"已生成",value:"1"}})],1),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.filterAllList}},[t._v("查找")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.clearAll}},[t._v("清除筛选")])],1)],1)}),b=[],y=(a("456d"),{name:"filter-list-item",props:{listType:String,filterList:Object,labelList:Array},data:function(){return{iFunTypeList:{funny:"搞笑",movie:"电影",entertainment:"娱乐",culture:"文化",travel:"旅行",arts:"艺术",foods:"美食",sports:"运动",technology:"科技"},iWordTypeList:{lifeStyle:"有型生活",oversea:"海外生存",date:"约会妙计",tourGuide:"旅游指南",serious:"正经一下",series:"电影美剧",dailyWord:"每日一词"}}},mounted:function(){},methods:{clearAll:function(){var t=this;Object.keys(this.filterList).forEach(function(e){t.filterList[e]=""}),this.filterList.label=[]},filterAllList:function(){this.$emit("filterAllList",this.filterList)}}}),w=y,x=(a("1ff0"),Object(d["a"])(w,v,b,!1,null,"2df83210",null));x.options.__file="FilterListItem.vue";var _=x.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-aside",{attrs:{width:"200px"}},[a("el-row",{staticClass:"tac"},[a("el-col",[a("el-menu",{attrs:{"default-active":t.defaultActive,"default-openeds":["cms"],router:""},on:{open:t.handleOpen,close:t.handleClose}},[a("el-submenu",{attrs:{index:"cms"}},[a("template",{slot:"title"},[a("span",[t._v("CMS")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"/iFunList"}},[t._v("iFun")]),a("el-menu-item",{attrs:{index:"/iTalkList"}},[t._v("iTalk")]),a("el-menu-item",{attrs:{index:"/",disabled:""}},[t._v("iListen")]),a("el-menu-item",{attrs:{index:"/iWordsList"}},[t._v("iWords")])],1)],2),a("el-menu-item",{attrs:{index:"/mediaList#1"}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("媒体库")])])],1)],1)],1)],1)},L=[],k={data:function(){return{defaultActive:"cms",defaultRoute:{MediaList:"/mediaList",EditMediaInfo:"/mediaList",IWordsList:"/iWordsList",EditIWordInfo:"/iWordsList",ITalkList:"/iTalkList",ShowITalkInfo:"/iTalkList",ShowIFunInfo:"/iFunList",IFunList:"/iFunList"}}},mounted:function(){this.defaultActive=this.defaultRoute[this.$route.name]},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},I=k,S=(a("fb33"),Object(d["a"])(I,T,L,!1,null,"97c47726",null));S.options.__file="LeftAsideItem.vue";var $=S.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.mediaList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"enVvt",label:"字幕"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",trigger:"hover"}},[a("show-media",{staticStyle:{width:"100%",height:"100%"},attrs:{"file-info":e.row,"current-type":e.row.fileUrl.substring(e.row.fileUrl.length-3)}}),a("div",{staticClass:"table-primary",attrs:{slot:"reference",title:e.row.enVvt},slot:"reference"},[t._v("\n                        "+t._s(e.row.enVvt)+"\n                    ")])],1)]}}])}),a("el-table-column",{attrs:{prop:"category",label:"类型",width:"50"}}),a("el-table-column",{attrs:{label:"中、英字幕长度",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{staticStyle:{"text-align":"right"}},[a("el-col",{attrs:{span:6}},[t._v("\n                        "+t._s(e.row.zhVvt?e.row.zhVvt.length:0)+"\n                    ")]),a("el-col",{attrs:{span:6}},[t._v("\n                        "+t._s(e.row.enVvt?e.row.enVvt.length:0)+"\n                    ")])],1)]}}])}),a("el-table-column",{attrs:{prop:"difficulty",label:"难度",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return["simple"===e.row.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===e.row.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===e.row.difficulty?a("span",[t._v("高级")]):t._e(),"bonus"===e.row.difficulty?a("span",[t._v("彩蛋题")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"stage",label:"状态",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.stage?a("span",[t._v("未生成")]):t._e(),1===e.row.stage?a("span",[t._v("已生成")]):t._e()]}}])}),"media"===t.tableType?a("el-table-column",{attrs:{label:"操作","min-width":"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.jumpPage("/editMediaInfo/"+e.row._id)}}},[t._v("编辑\n                ")]),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.delMediaInfo(e.row._id)}}},[t._v("\n                    刪除\n                ")])]}}])}):t._e()],1)],1)},C=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"media"},["mp4"===t.currentType||"3u8"===t.currentType?a("div",{staticClass:"media"},[a("video",{staticClass:"media",attrs:{controls:"",preload:"none",poster:""}},[a("source",{attrs:{src:t.fileInfo.fileUrl,type:"video/mp4"}})])]):t._e(),"jpg"===t.currentType||"png"===t.currentType||"gif"===t.currentType?a("div",{staticClass:"media"},[a("img",{staticClass:"media",attrs:{src:t.fileInfo.fileUrl}})]):t._e(),"mp3"===t.currentType?a("div",{staticClass:"media"},[a("audio",{staticClass:"media",attrs:{controls:"",preload:"none"}},[a("source",{attrs:{src:t.fileInfo.fileUrl,type:"audio/mp3"}})])]):t._e()])},D=[],F={props:{currentType:String,fileInfo:Object},mounted:function(){},watch:{fileInfo:function(t){},currentType:function(t){}}},W=F,j=(a("a8e1"),Object(d["a"])(W,M,D,!1,null,"1c6e1092",null));j.options.__file="ShowMediaItem.vue";var P=j.exports,V=a("2e0b"),U={props:{tableType:String,mediaList:Array,newRowList:Array},components:{ElRow:V["a"],ShowMedia:P},data:function(){return{}},mounted:function(){},methods:{jumpPage:function(t){this.$router.push(t)},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},testToggleSelection:function(t){console.log(t);var e=[];this.mediaList.forEach(function(a){-1!==t.indexOf(a.fileId)&&(console.log(a),e.push(a))}),this.toggleSelection(e)},delMediaInfo:function(t){this.$emit("delMediaInfo",t)},clearSelect:function(){this.$refs.multipleTable.clearSelection()},handleSelectChange:function(t){this.$emit("select",t)}},watch:{}},O=U,A=(a("ea88"),Object(d["a"])(O,z,C,!1,null,"d9f45be0",null));A.options.__file="MediaListItem.vue";var E=A.exports,N={components:{FilterList:_,LeftAside:$,MediaList:E},data:function(){return{mediaList:[],multipleSelection:[],currentPage:2,isShowSetTime:!1,fileList:[],dialogUploadVisible:!1,paginationNum:0,filterList:{},paginationSize:20,labelList:[],sort:"1"}},mounted:function(){this.init()},methods:{init:function(){this.getMediaListData(),this.getAllLabelData()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.jumpPage("/mediaList#".concat(t))},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},hideUploadDia:function(){this.fileList=[],this.dialogUploadVisible=!1},getMediaListData:function(t){var e=this;t=t||{},this.getMediaNumData(t).then(function(){t.page=e.currentPage,t.num=e.paginationSize,e.getSort(t),e.$axios.get("/material/_find",{params:t}).then(function(t){console.log(t.data.data),t.data.code||(e.mediaList=t.data.data)})})},getSort:function(t){return"2"===this.sort?t.sort={enVvtLen:-1}:"3"===this.sort&&(t.sort={enVvtLen:1}),t},handleUploadChange:function(){this.dialogUploadVisible=!0},filterMediaList:function(t){var e={page:1};t.label&&(e.label=t.label),t.category&&(e.category=t.category),"all"!==t.difficulty&&(e.difficulty=t.difficulty),"all"!==t.stage&&(e.stage=t.stage),this.getMediaListData(e)},getMediaNumData:function(t){var e=this;return new Promise(function(a,i){e.$axios.get("/material/_getnum",{params:t}).then(function(t){e.paginationNum=t.data.data,e.currentPage=Number(e.$route.hash.substr(1))||1,a()})})},getAllLabelData:function(){var t=this;this.$axios.get("/label/_find").then(function(e){e.data.code||(t.labelList=e.data.data)})},changeUploadList:function(){var t=this,e=Object.values(this.$refs.myFiles.files);e.forEach(function(e){t.fileList.push({name:e.name,num:0,id:""})}),this.postUploadData(0,e)},postUploadData:function(t,e){var a=this,i=new FormData;i.append("file",e[t]),this.handleUploadChange(),this.$axios.post("/file/_upload",i,{onUploadProgress:function(e){this.fileList[t].num=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then(function(i){0===i.data.code&&i.data.data[0]&&(a.$message.success("上传成功"),a.fileList[t].id=i.data.data[0].material._id,a.getMediaListData(),t+=1,t<=e.length-1?a.postUploadData(t,e):a.$refs.myFiles.value="")})},jumpNewPage:function(t){window.open("#/editMediaInfo/"+t,"_blank")},delMediaInfo:function(t){var e=this;this.$confirm("文件将被直接删除,可能导致引用该媒体的文档失效。","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button el-button--danger"}).then(function(){e.delMediaData(t)}).catch(function(){})},delMediaData:function(t){var e=this;this.$axios.get("/material/_delete",{params:{materialId:t}}).then(function(t){t.data.code||(e.$message({type:"success",message:"已删除"}),e.init())})}},watch:{$route:function(){this.init()}}},R=N,B=(a("ec13"),Object(d["a"])(R,h,g,!1,null,"59a907a6",null));B.options.__file="MediaList.vue";var q=B.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("media-aside",{attrs:{"file-info":t.fileInfo}}),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",[t._v("基本信息")])]),a("el-col",{attrs:{span:5}},[a("div",[a("el-button",{attrs:{size:"small"},on:{click:t.postCreateCMSData}},[t._v("生成CMS文章")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.postMediaInfoData()}}},[t._v("保存")])],1)])],1),a("div",{staticStyle:{margin:"40px 0"}},[a("span",{staticClass:"typeTitle"},[t._v("类型")]),a("el-select",{attrs:{placeholder:"请选择",value:"",size:"mini"},model:{value:t.currentType,callback:function(e){t.currentType=e},expression:"currentType"}},[a("el-option",{attrs:{label:"iFun",value:"iFun"}}),a("el-option",{attrs:{label:"iTalk",value:"iTalk"}}),a("el-option",{attrs:{label:"iListen",value:"iListen",disabled:""}}),a("el-option",{attrs:{label:"iWords",value:"iWord",disabled:""}})],1)],1),a("talk-info",{ref:"talkForm",attrs:{type:t.currentType,form:t.iTalkForm,"label-list":t.labelList}}),a("fun-info",{ref:"funForm",attrs:{type:t.currentType,form:t.iFunForm,"label-list":t.labelList}})],1)],1)],1)},Y=[],G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"iTalk"===t.type?a("el-container",[a("el-form",{ref:"ruleForm",staticStyle:{width:"100%"},attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文标题",prop:"zhTitle"}},[a("el-input",{attrs:{placeholder:"中文标题"},model:{value:t.form.zhTitle,callback:function(e){t.$set(t.form,"zhTitle",e)},expression:"form.zhTitle"}})],1),a("el-form-item",{attrs:{label:"中文字幕",prop:"zhVvt"}},[a("el-input",{attrs:{placeholder:"中文字幕"},model:{value:t.form.zhVvt,callback:function(e){t.$set(t.form,"zhVvt",e)},expression:"form.zhVvt"}}),a("div",{staticClass:"textString"},[t._v(t._s(t.form.zhVvt.length)+"字符")])],1),a("el-form-item",{attrs:{label:"英文字幕",prop:"enVvt"}},[a("el-input",{attrs:{placeholder:"英文字幕"},model:{value:t.form.enVvt,callback:function(e){t.$set(t.form,"enVvt",e)},expression:"form.enVvt"}}),a("div",{staticClass:"textString"},[t._v(t._s(t.form.enVvt.length)+"字符")])],1),a("el-form-item",{attrs:{label:"标签",prop:"label"}},[a("el-select",{attrs:{value:"",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}},t._l(t.labelList,function(t){return a("el-option",{key:t._id,attrs:{label:t.label,value:t.label}})}),1)],1)],1),a("el-col",{attrs:{span:6,offset:2}},[a("el-form-item",{attrs:{label:"难度",prop:"difficulty"}},[a("el-select",{attrs:{placeholder:"难度",value:""},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[a("el-option",{attrs:{label:"初级",value:"simple"}}),a("el-option",{attrs:{label:"中级",value:"easily"}}),a("el-option",{attrs:{label:"高级",value:"difficulty"}}),a("el-option",{attrs:{label:"彩蛋题",value:"bonus"}}),a("el-option",{attrs:{label:"其他",value:"other"}})],1)],1)],1)],1)],1)],1):t._e()},J=[],K={props:{type:String,form:Object,labelList:Array},data:function(){return{rules:{zhTitle:[{required:!0,message:"请输入",trigger:"blur"}],zhVvt:[{required:!0,message:"请输入",trigger:"blur"}],enVvt:[{required:!0,message:"请输入",trigger:"blur"}],difficulty:[{required:!0,message:"请输入",trigger:"change"}]}}},methods:{submitForm:function(t){var e=this;return new Promise(function(a,i){e.$refs[t].validate(function(t){if(!t)return e.$message.warning("请检查字段是否填写完整！"),!1;a(!0)})})}}},Q=K,X=(a("9b74"),Object(d["a"])(Q,G,J,!1,null,"24bb8d13",null));X.options.__file="TalkInfoItem.vue";var Z=X.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"iFun"===t.type?a("el-container",[a("el-form",{ref:"ruleForm",staticStyle:{width:"100%"},attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"中文标题",prop:"zhTitle"}},[a("el-input",{attrs:{placeholder:"中文标题"},model:{value:t.form.zhTitle,callback:function(e){t.$set(t.form,"zhTitle",e)},expression:"form.zhTitle"}})],1),a("el-form-item",{attrs:{label:"英文标题",prop:"enTitle"}},[a("el-input",{attrs:{placeholder:"英文标题"},model:{value:t.form.enTitle,callback:function(e){t.$set(t.form,"enTitle",e)},expression:"form.enTitle"}})],1),a("el-form-item",{attrs:{label:"摘要",prop:"abstract"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"摘要"},model:{value:t.form.abstract,callback:function(e){t.$set(t.form,"abstract",e)},expression:"form.abstract"}})],1),a("el-form-item",{attrs:{label:"标签",prop:"label"}},[a("el-select",{attrs:{value:"",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择标签"},model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}},t._l(t.labelList,function(t){return a("el-option",{key:t._id,attrs:{label:t.label,value:t.label}})}),1)],1),a("el-form-item",{attrs:{label:"中文字幕",prop:"zhVvt"}},[a("el-input",{attrs:{placeholder:"中文字幕"},model:{value:t.form.zhVvt,callback:function(e){t.$set(t.form,"zhVvt",e)},expression:"form.zhVvt"}}),a("div",{staticClass:"textString"},[t._v(t._s(t.form.zhVvt.length)+"字符")])],1),a("el-form-item",{attrs:{label:"英文字幕",prop:"enVvt"}},[a("el-input",{attrs:{placeholder:"英文字幕"},model:{value:t.form.enVvt,callback:function(e){t.$set(t.form,"enVvt",e)},expression:"form.enVvt"}}),a("div",{staticClass:"textString"},[t._v(t._s(t.form.enVvt.length)+"字符")])],1)],1),a("el-col",{attrs:{span:6,offset:2}},[a("el-form-item",{attrs:{label:"分类",prop:"class"}},[a("el-select",{attrs:{placeholder:"分类",value:""},model:{value:t.form.class,callback:function(e){t.$set(t.form,"class",e)},expression:"form.class"}},t._l(t.iFunTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"难度",prop:"difficulty"}},[a("el-select",{attrs:{placeholder:"难度",value:""},model:{value:t.form.difficulty,callback:function(e){t.$set(t.form,"difficulty",e)},expression:"form.difficulty"}},[a("el-option",{attrs:{label:"初级",value:"simple"}}),a("el-option",{attrs:{label:"中级",value:"easily"}}),a("el-option",{attrs:{label:"高级",value:"difficulty"}})],1)],1)],1)],1)],1)],1):t._e()},et=[],at={props:{type:String,form:{type:Object,default:function(){return{}}},labelList:Array},data:function(){return{iFunTypeList:{funny:"搞笑",movie:"电影",entertainment:"娱乐",culture:"文化",travel:"旅行",arts:"艺术",foods:"美食",sports:"运动",technology:"科技"},rules:{zhTitle:[{required:!0,message:"请输入",trigger:"blur"}],enTitle:[{required:!0,message:"请输入",trigger:"blur"}],abstract:[{required:!0,message:"请输入",trigger:"blur"}],zhVvt:[{required:!0,message:"请输入",trigger:"blur"}],enVvt:[{required:!0,message:"请输入",trigger:"blur"}],class:[{required:!0,message:"请选择",trigger:"change"}],difficulty:[{required:!0,message:"请选择",trigger:"change"}]}}},mounted:function(){},methods:{submitForm:function(t){var e=this;return new Promise(function(a,i){e.$refs[t].validate(function(t){t?a(!0):(e.$message.warning("请检查字段是否填写完整！"),i(!1))})})}}},it=at,nt=(a("0595"),Object(d["a"])(it,tt,et,!1,null,"71aa4acd",null));nt.options.__file="FunInfoItem.vue";var ot=nt.exports,st=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("el-aside",{attrs:{width:"201px"}},[i("div",[i("div",{staticClass:"backBlock",on:{click:function(){t.$router.go(-1)}}},[i("i",{staticClass:"el-icon-back"}),i("span",{staticClass:"backText"},[e._v("返回")])]),i("show-media",{staticStyle:{width:"200px",height:"100px"},attrs:{"file-info":e.fileInfo,"current-type":e.currentType}}),i("div",{staticClass:"backBlock"},[i("el-button",{staticClass:"backBlock",attrs:{type:"text"},on:{click:function(t){e.jumpPage("/editMediaInfo/"+e.$route.params.id)}}},[e._v("基本信息")]),i("el-button",{staticClass:"backBlock",attrs:{type:"text",disabled:"mp4"!==e.currentType},on:{click:function(t){e.jumpPage("/editMaterialInfo/"+e.$route.params.id)}}},[e._v("编辑素材")])],1)],1)])},lt=[],rt={props:{fileInfo:Object},components:{ShowMedia:P},data:function(){return{currentType:""}},mounted:function(){},methods:{jumpPage:function(t){this.$router.push(t)}},watch:{fileInfo:function(t){this.currentType=t.fileUrl.substring(t.fileUrl.length-3)}}},ct=rt,dt=(a("bee0"),Object(d["a"])(ct,st,lt,!1,null,"1ea5eafe",null));dt.options.__file="MediaAsideItem.vue";var ut=dt.exports,ft={name:"edit-media-info",components:{TalkInfo:Z,FunInfo:ot,MediaAside:ut},data:function(){return{currentType:"iFun",iTalkForm:{zhVvt:"",enVvt:""},iFunForm:{zhVvt:"",enVvt:""},labelList:[],fileInfo:{}}},mounted:function(){this.getOneMediaData()},methods:{postCreateCMSData:function(){var t=this;this.checkFormRules().then(function(e){var a=t.getFormData(t.getMediaInfo());t.$axios.post("/material/_createCMS",a).then(function(e){e.data.code||(t.$message.success("创建成功"),a.append("stage",1),t.postMediaInfoData(a))})})},checkFormRules:function(){var t=this;return new Promise(function(e,a){"iFun"===t.currentType?t.$refs.funForm.submitForm("ruleForm").then(function(t){e(t)}):"iTalk"===t.currentType&&t.$refs.talkForm.submitForm("ruleForm").then(function(t){e(t)})})},postAddLabelData:function(t){var e=this;t=t||[],t.forEach(function(t){var a=new FormData;a.append("label",t),a.append("category",e.currentType),e.$axios.post("/label/_add",a).then(function(t){console.log(t)})})},getOneMediaData:function(){var t=this;this.$axios.get("/material/_getone",{params:{materialId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e),t.getMediaFormInfo(e),t.fileInfo=e.data.data)})},getMediaFormInfo:function(t){if(t.data.data.category)switch(this.currentType=t.data.data.category,t.data.data.label=t.data.data.label||[],t.data.data.category){case"iFun":this.iFunForm=t.data.data;break;case"iTalk":this.iTalkForm=t.data.data;break}this.getAllLabelData(t.data.data.category)},getMediaInfo:function(){var t=this.iFunForm;switch(this.currentType){case"iFun":t=this.iFunForm;break;case"iTalk":t=this.iTalkForm}return t},getAllLabelData:function(t){var e=this;this.$axios.get("/label/_find",{params:{category:t,all:"all"}}).then(function(t){console.log(t.data.data),t.data.code||(e.labelList=t.data.data)})},getFormData:function(t){var e=new FormData;return t.materialId=this.$route.params.id,t.source="upload",t.status=0,t.category=this.currentType,delete t.fileId,delete t._id,Object.keys(t).forEach(function(a){e.append(a,t[a])}),e.set("label",JSON.stringify(t.label)),e},postMediaInfoData:function(t){var e=this;this.checkFormRules().then(function(a){var i=t||e.getFormData(e.getMediaInfo());e.postAddLabelData(e.getMediaInfo().label),e.$axios.post("/material/_update",i).then(function(t){t.data.code||e.$message.success("更新成功")})})}},watch:{currentType:function(t){console.log(t),this.getAllLabelData(t)}}},pt=ft,mt=(a("fc6b"),Object(d["a"])(pt,H,Y,!1,null,"79f6aab4",null));mt.options.__file="EditMediaInfo.vue";var ht=mt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("media-aside",{attrs:{"file-info":t.fileInfo}}),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:3}},[a("div",[t._v("编辑")])])],1),a("div",{staticClass:"videoInfo"},[a("show-media",{staticStyle:{width:"732px",height:"403px"},attrs:{id:"mediaVideoSource","file-info":t.fileInfo,"current-type":t.currentType}})],1),a("div",[a("el-button",{staticClass:"addManual",attrs:{plain:"",size:"mini"},on:{click:function(e){t.manualCut=!t.manualCut}}},[t._v("添加手动裁剪")]),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n                        自动切分为iTalk\n                    ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"one"}},[t._v("每一句")]),a("el-dropdown-item",{attrs:{command:"two"}},[t._v("每二句")])],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isShowCut,expression:"isShowCut"}],staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"}},[t._v("切分")])],1),a("div",{staticClass:"cutList"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.manualCut,expression:"manualCut"}],staticClass:"manual"},[a("div",{staticClass:"manualTitle"},[t._v("手动裁剪")]),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"},on:{click:t.playCurrentTime}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:"00:00"},model:{value:t.manualStartTime,callback:function(e){t.manualStartTime=e},expression:"manualStartTime"}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:"00:00"},model:{value:t.manualEndTime,callback:function(e){t.manualEndTime=e},expression:"manualEndTime"}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:"难度"}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.autoCut,expression:"autoCut"}]},[a("div",{staticClass:"manualTitle"},[t._v("自动切分iTalk (42个片段)")]),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1),a("el-row",{staticClass:"manualList",attrs:{gutter:20}},[a("el-col",{attrs:{span:1}},[a("div",[a("i",{staticClass:"el-icon-caret-right",staticStyle:{"font-size":"27px"}})])]),a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}}),t._v("\n                                -\n                                "),a("el-input",{staticStyle:{width:"40%"},attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:12}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("el-input",{attrs:{size:"mini",placeholder:""}})],1)]),a("el-col",{attrs:{span:2}},[a("div",[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"25px"}})])])],1)],1)])],1)],1)],1)},vt=[],bt={name:"edit-media-info",components:{MediaAside:ut,ShowMedia:P},data:function(){return{isShowCut:!1,manualCut:!1,autoCut:!1,fileInfo:{},currentType:"",manualStartTime:"",manualEndTime:""}},mounted:function(){this.getOneMediaData()},methods:{getOneMediaData:function(){var t=this;this.$axios.get("/material/_getone",{params:{materialId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e),t.fileInfo=e.data.data,t.currentType=e.data.data.fileUrl.substring(e.data.data.fileUrl.length-3))})},playCurrentTime:function(){var t=document.getElementById("mediaVideoSource").getElementsByTagName("video")[0];t.src=this.fileInfo.fileUrl+"#t=2,3",setTimeout(function(){console.log(t.currentSrc),document.getElementById("mediaVideoSource").getElementsByTagName("video")[0].play(),console.log(document.getElementById("mediaVideoSource").getElementsByTagName("video")[0].currentSrc)},200)},handleCommand:function(t){console.log(t),this.autoCut=!this.autoCut}}},yt=bt,wt=(a("c9c0"),Object(d["a"])(yt,gt,vt,!1,null,"1a734c6c",null));wt.options.__file="EditMaterialInfo.vue";var xt=wt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        iWords\n                    ")])])],1),a("filter-list",{attrs:{listType:"word",filterList:t.filterList,"label-list":t.labelList},on:{filterAllList:t.filterWordList}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.jumpPage("/editIWordInfo/new")}}},[t._v("添加")]),a("lesson-list",{attrs:{"lesson-type":"word","type-list":t.iWordTypeList,"lesson-list":t.wordsList,"edit-page":"/editIWordInfo/"},on:{delLessonInfo:t.delLessonInfo,handleCommand:t.handleCommand}})],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.paginationSize,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.currentId},on:{hideTiming:t.hideTimer,releaseTimer:t.releaseTimer}})],1)],1)},Tt=[],Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"timingMain",attrs:{title:"定时发布",visible:t.isShow,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"40%"},on:{"update:visible":function(e){t.isShow=e}}},[a("div",{staticStyle:{"min-height":"150px"}},[a("el-date-picker",{staticStyle:{"margin-right":"15px"},attrs:{size:"small",type:"date",placeholder:"选择日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("el-time-select",{attrs:{size:"small","picker-options":{start:"00:30",step:"00:30",end:"23:30"},placeholder:"选择时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.hideTiming}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setScheduledRelease}},[t._v("设 定")])],1)])},kt=[],It=(a("28a5"),{props:{isShow:Boolean,id:String},data:function(){return{time:"",date:""}},mounted:function(){},methods:{hideTiming:function(){this.$emit("hideTiming",!1)},setScheduledRelease:function(){var t=this.time.split(":"),e=new FormData;e.append("lessonId",this.id);var a=new Date(this.date).setHours(t[0],t[1],0);if(e.append("time",a/1e3),"new"===this.$route.params.id)return this.$emit("hideTiming",{key:"new",date:a});this.$emit("releaseTimer",e)}},watch:{}}),St=It,$t=(a("4131"),Object(d["a"])(St,Lt,kt,!1,null,"4fefa42f",null));$t.options.__file="ReleaseTimingItem.vue";var zt=$t.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{ref:"",staticStyle:{width:"100%"},attrs:{data:t.lessonList,"tooltip-effect":"dark"},on:{"selection-change":function(t){}}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),"talk"!==t.lessonType?a("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}):t._e(),"talk"===t.lessonType?a("el-table-column",{attrs:{label:"字幕"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.materialId?e.row.materialId.enVvt:""))]}}])}):t._e(),"talk"!==t.lessonType?a("el-table-column",{attrs:{prop:"difficulty",label:"分类"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.typeList[e.row.class]))])]}}])}):t._e(),"word"!==t.lessonType?a("el-table-column",{attrs:{prop:"difficulty",label:"难度"},scopedSlots:t._u([{key:"default",fn:function(e){return["simple"===e.row.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===e.row.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===e.row.difficulty?a("span",[t._v("高级")]):t._e(),"bonus"===e.row.difficulty?a("span",[t._v("彩蛋题")]):t._e(),"other"===e.row.difficulty?a("span",[t._v("其他")]):t._e()]}}])}):t._e(),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",[t._v("未发布")]):t._e(),1===e.row.status?a("span",[t._v("待发布")]):t._e(),2===e.row.status?a("span",[t._v("已发布")]):t._e(),a("div",{staticClass:"table-secondary"},[t._v(t._s(t._f("moment")(1e3*e.row.publicTime||"","YYYY/MM/DD HH:mm")))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.jumpPage(t.editPage+e.row._id)}}},[t._v("编辑\n            ")]),a("el-dropdown",{staticClass:"dropdown-edit",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                            发布"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"release",value:e.row}}},[t._v("发布")]),a("el-dropdown-item",{attrs:{command:{key:"time",value:e.row}}},[t._v("定时发布")])],1)],1),a("el-button",{staticClass:"dropdown-edit",staticStyle:{color:"#F56C6C"},attrs:{type:"text",size:"small"},on:{click:function(a){t.delLessonInfo(e.row._id)}}},[t._v("\n                刪除\n            ")])]}}])})],1)},Mt=[],Dt={props:{lessonType:String,lessonList:Array,typeList:Object,editPage:String},mounted:function(){},methods:{jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){this.$emit("handleCommand",t)},delLessonInfo:function(t){this.$emit("delLessonInfo",t)}}},Ft=Dt,Wt=(a("5f7c"),Object(d["a"])(Ft,Ct,Mt,!1,null,"46f29b94",null));Wt.options.__file="LessonListItem.vue";var jt=Wt.exports,Pt={components:{FilterList:_,ReleaseTiming:zt,LeftAside:$,LessonList:jt},data:function(){return{iWordTypeList:{lifeStyle:"有型生活",oversea:"海外生存",date:"约会妙计",tourGuide:"旅游指南",serious:"正经一下",series:"电影美剧",dailyWord:"每日一词"},wordsList:[],currentPage:1,isShowSetTime:!1,paginationNum:0,paginationSize:20,filterList:{},currentId:"",labelList:[]}},mounted:function(){this.init()},methods:{init:function(){this.getWordsListData(),this.getWordsNumData(),this.getAllLabelData()},getWordsListData:function(){var t=this;this.$axios.get("/lesson/_find",{params:{page:this.currentPage,num:this.paginationSize,category:"iWord"}}).then(function(e){console.log(e),e.data.code||(t.wordsList=e.data.data)})},getWordsNumData:function(){var t=this;this.$axios.get("/lesson/_getnum",{params:{page:this.currentPage,category:"iWord"}}).then(function(e){t.paginationNum=e.data.data})},filterWordList:function(t){var e={page:1,category:t.category||"",enTitle:t.title||"",zhTitle:t.title||"",label:t.label||[],abstract:t.title||"",enVvt:t.title||"",zhVvt:t.title||"",difficulty:t.difficulty||""};this.getWordsListData(e)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getWordsListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key?(this.isShowSetTime=!0,this.currentId=t.value._id):this.postUpdateWordData(t.value)},hideTimer:function(){this.isShowSetTime=!1,this.init()},postUpdateWordData:function(t){var e=this,a=new FormData;a.append("lessonId",t._id),a.append("publicTime",parseInt((new Date).getTime()/1e3)),a.append("status",2),this.$axios.post("/lesson/_update",a).then(function(t){console.log(t),t.data.code||e.getWordsListData()})},getAllLabelData:function(){var t=this;this.$axios.get("/label/_find",{params:{category:"iWord",all:"all"}}).then(function(e){console.log(e.data.data),e.data.code||(t.labelList=e.data.data)})},delLessonInfo:function(t){var e=this;this.$confirm("文件将被直接删除","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button el-button--danger"}).then(function(){e.delLessonData(t)}).catch(function(){})},delLessonData:function(t){var e=this;this.$axios.get("/lesson/_delete",{params:{lessonId:t}}).then(function(t){t.data.code||(e.$message({type:"success",message:"已删除"}),e.init())})},releaseTimer:function(t){var e=this;this.$axios.post("/lesson/_public",t).then(function(t){t.data.code||(e.$message.success("设置成功"),e.hideTimer())})}}},Vt=Pt,Ut=(a("f468"),Object(d["a"])(Vt,_t,Tt,!1,null,"4a5c4e50",null));Ut.options.__file="IWordsList.vue";var Ot=Ut.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"标题",size:"medium"},model:{value:t.iWordTitle,callback:function(e){t.iWordTitle=e},expression:"iWordTitle"}})],1),a("el-col",{attrs:{span:4,offset:1}},[a("el-select",{attrs:{placeholder:"分类",value:"",size:"medium"},model:{value:t.iWordType,callback:function(e){t.iWordType=e},expression:"iWordType"}},t._l(t.iWordTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1),a("div",{staticStyle:{float:"right"}},[a("div",[a("el-button",{staticStyle:{"margin-right":"15px"},attrs:{size:"small"},on:{click:t.postWordsData}},[t._v("保存\n                        ")]),a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"small",trigger:"click"},on:{click:t.postReleaseData,command:t.handleCommand}},[t._v("发布\n                            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"time",value:""}}},[t._v("定时发布")])],1)],1)],1)])],1),a("el-row",{staticClass:"workInfoMain",attrs:{type:"flex"}},[a("el-col",{attrs:{span:11}},[a("p",[t._v("Markdown\n                        "),a("el-button",{staticStyle:{"margin-left":"30px",padding:"0"},attrs:{type:"text"},on:{click:function(e){t.dialogTableVisible=!0}}},[t._v("插入媒体\n                        ")])],1),a("el-input",{style:{height:t.currentHeight+"px"},attrs:{id:"markdownInfo",type:"textarea"},on:{change:t.changeMarkDown},model:{value:t.markdownInfo,callback:function(e){t.markdownInfo=e},expression:"markdownInfo"}})],1),a("el-col",{attrs:{span:11,offset:1}},[a("p",[t._v("渲染预览")]),a("div",{staticClass:"workInfoShow",style:{height:t.currentHeight+"px"}},[a("vue-markdown",{staticClass:"markdownInfo",attrs:{source:t.showInfo}})],1)])],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.currentId},on:{hideTiming:t.hideTimer,releaseTimer:t.releaseTimer}})],1),a("el-dialog",{attrs:{title:"媒体库",width:"95%",top:"5vh","before-close":t.hideMediaDia,visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("filter-list",{attrs:{listType:"media","filter-list":t.filterList},on:{filterMediaList:t.filterMediaList}}),a("div",{staticClass:"am-form-file"},[a("el-button",{staticStyle:{float:"left"},attrs:{size:"mini",type:"primary"}},[t._v("上传")]),a("input",{ref:"myFiles",attrs:{type:"file",multiple:"",accept:"audio/mp3,video/mp4,image/jpg,image/png"},on:{change:t.changeUploadList}})],1),a("media-list",{ref:"mediaListDia",attrs:{"table-type":"mediaDia","new-row-list":t.newRowList,"media-list":t.mediaList,"current-page":t.currentPage},on:{select:t.handleSelectChange}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":t.currentPage,"page-size":t.paginationSize,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.createMDInfo}},[t._v("确 定")])],1)],1),a("el-dialog",{staticClass:"dialogUpload",attrs:{title:"上传文件",visible:t.dialogUploadVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,"before-close":t.hideUploadDia,width:"50%"},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[a("div",{staticStyle:{border:"1px solid #bbb","min-height":"200px"}},[a("div",{staticStyle:{padding:"10px"}},t._l(t.fileList,function(e,i){return a("div",{key:i},[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("div",[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.name))]),a("el-progress",{attrs:{"stroke-width":3,percentage:e.num,status:100===e.num?"success":"text"}},[t._v(t._s(e.num)+"%\n                                    ")])],1)]),a("el-col",{attrs:{span:4}},[a("div",[""!==e.id?a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){t.jumpNewPage(e.id)}}},[t._v("查看\n                                    ")]):t._e()],1)])],1)],1)}),0)]),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.hideUploadDia}},[t._v("完成")])],1)])],1)],1)},Et=[],Nt=(a("a481"),a("4917"),a("5df3"),a("53ca")),Rt={components:{ReleaseTiming:zt,LeftAside:$,FilterList:_,MediaList:E},data:function(){return{iWordTypeList:{lifeStyle:"有型生活",oversea:"海外生存",date:"约会妙计",tourGuide:"旅游指南",serious:"正经一下",series:"电影美剧",dailyWord:"每日一词"},iWordTitle:"",markdownInfo:"",currentHeight:0,showInfo:"",isShowSetTime:!1,dialogTableVisible:!1,dialogUploadVisible:!1,filterList:{},iWordType:"",currentId:this.$route.params.id,mediaList:[],currentPage:1,paginationNum:0,paginationSize:10,currentSelect:[],fileList:[],newRowList:[]}},mounted:function(){this.init()},methods:{init:function(){this.currentHeight=window.innerHeight-150,"new"!==this.$route.params.id&&this.getOneWordsData(),this.getMediaList()},getMediaList:function(t){var e=this;this.getMediaListData(t).then(function(a){e.mediaList=a,e.getMediaNumData(t)})},getMediaListData:function(t){var e=this;return t=t||{},t.page=this.currentPage,t.num=this.paginationSize,new Promise(function(a,i){e.$axios.get("/material/_find",{params:t}).then(function(t){t.data.code||a(t.data.data)})})},getMediaNumData:function(t){var e=this;t=t||{},this.$axios.get("/material/_getnum",{params:t}).then(function(t){e.paginationNum=t.data.data})},changeUploadList:function(){var t=this,e=Object.values(this.$refs.myFiles.files);e.forEach(function(e){t.fileList.push({name:e.name,num:0,id:""})}),this.postUploadData(0,e)},handleUploadChange:function(){this.dialogUploadVisible=!0},postUploadData:function(t,e){var a=this,i=new FormData;i.append("file",e[t]),this.handleUploadChange(),this.$axios.post("/file/_upload",i,{onUploadProgress:function(e){this.fileList[t].num=parseInt(Math.round(100*e.loaded/e.total))}.bind(this)}).then(function(i){0===i.data.code&&i.data.data[0]&&(a.$message.success("上传成功"),a.fileList[t].id=i.data.data[0].material._id,a.getMediaListData().then(function(t){a.mediaList=t,setTimeout(function(){a.newRowList.push(i.data.data[0].material.fileId),a.$refs.mediaListDia.testToggleSelection(a.newRowList)},0)}),t+=1,t<=e.length-1?a.postUploadData(t,e):a.$refs.myFiles.value="")})},jumpNewPage:function(t){window.open("#/editMediaInfo/"+t,"_blank")},hideTimer:function(t){var e=this;"object"===Object(Nt["a"])(t)?this.postWordData(this.getAddWordInfo(0)).then(function(a){e.currentId=a.id,e.setScheduledRelease(a._id,t.date)}):(this.postUpdateWordsData(),this.isShowSetTime=!1)},setScheduledRelease:function(t,e){var a=this,i=new FormData;i.append("lessonId",t),i.append("time",e/1e3),this.$axios.post("/lesson/_public",i).then(function(e){e.data.code||(a.$message.success("设置成功"),a.jumpPage("/editIWordInfo/"+t),a.isShowSetTime=!1)})},hideUploadDia:function(){this.fileList=[],this.dialogUploadVisible=!1},hideMediaDia:function(){this.$refs.mediaListDia.clearSelect(),this.newRowList=[],this.dialogTableVisible=!1},getOneWordsData:function(){var t=this;this.$axios.get("/lesson/_getone",{params:{lessonId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e.data.data),t.iWordTitle=e.data.data.title||"",t.iWordType=e.data.data.class||"",t.markdownInfo=e.data.data.cms)})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getMediaList()},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},filterMediaList:function(){},postWordsData:function(){"new"===this.$route.params.id?this.postAddWordsData(0):this.postUpdateWordsData()},getAddWordInfo:function(t){var e=new FormData;return e.append("cms",this.markdownInfo),e.append("zhTitle",this.iWordTitle),e.append("category","iWord"),e.append("status",t),e.append("class",this.iWordType),2===t&&e.append("publicTime",parseInt((new Date).getTime()/1e3)),e},postAddWordsData:function(t){var e=this;this.postWordData(this.getAddWordInfo(t)).then(function(t){e.$message.success("添加成功"),e.jumpPage("/editIWordInfo/"+t._id)})},postWordData:function(t){var e=this;return new Promise(function(a,i){e.$axios.post("/lesson/_add",t).then(function(t){console.log(t),t.data.code||a(t.data.data)})})},postUpdateWordsData:function(){var t=this,e=new FormData;e.append("lessonId",this.$route.params.id),e.append("cms",this.markdownInfo),e.append("zhTitle",this.iWordTitle),e.append("class",this.iWordType),this.$axios.post("/lesson/_update",e).then(function(e){console.log(e),e.data.code||t.$message.success("更新成功")})},postReleaseData:function(){var t=this;if("new"===this.$route.params.id)return this.postAddWordsData(2);var e=new FormData;e.append("lessonId",this.$route.params.id),e.append("cms",this.markdownInfo),e.append("zhTitle",this.iWordTitle),e.append("publicTime",parseInt((new Date).getTime()/1e3)),e.append("class",this.iWordType),e.append("status",2),this.$axios.post("/lesson/_update",e).then(function(e){e.data.code||t.$message.success("发布成功")})},jumpPage:function(t){this.$router.push(t)},handleSelectChange:function(t){var e=this,a=[];t.forEach(function(t){a.push(e.getOneFile(t.fileId))}),Promise.all(a).then(function(t){console.log(t),e.currentSelect=t})},getOneFile:function(t){var e=this;return new Promise(function(a,i){e.$axios.get("/file/_getone",{params:{fileId:t}}).then(function(t){t.data.code||a(t.data.data)})})},releaseTimer:function(t){var e=this;this.$axios.post("/lesson/_public",t).then(function(a){a.data.code||(e.$message.success("设置成功"),e.hideTimer(t))})},createMDInfo:function(){var t=document.querySelector("#markdownInfo"),e=t.selectionEnd;t.focus();var a="";this.currentSelect.forEach(function(t){var e=t.fileName.substring(t.fileName.length-4);".mp3"===e.toLowerCase()?a+="\n![audio]("+t.fileUrl+")\n":".mp4"===e.toLowerCase()?a+="\n![video]("+t.fileUrl+")\n":".jpg"!==e.toLowerCase()&&".png"!==e.toLowerCase()&&".gif"!==e.toLowerCase()||(a+="\n![pic]("+t.fileUrl+")\n")}),this.markdownInfo=this.markdownInfo.substr(0,e)+a+this.markdownInfo.substr(e,this.markdownInfo.length-1),this.hideMediaDia()},changeMarkDown:function(){var t=this.markdownInfo,e=t.match(/!+\[audio]\(([^)]*)\)/gi)||[];e.forEach(function(e){var a=e.split(/\(|\)/)[1],i='<audio  controls="" preload="none"><source src="'.concat(a,'"></audio>');t=t.replace(e,i)});var a=t.match(/!+\[video]\(([^)]*)\)/gi)||[];a.forEach(function(e){var a=e.split(/\(|\)/)[1],i='<video  controls="" preload="none"><source src="'.concat(a,'" type="video/mp4"></video>');t=t.replace(e,i)}),this.showInfo=t}},watch:{markdownInfo:function(t,e){this.changeMarkDown()}}},Bt=Rt,qt=(a("7b5d"),Object(d["a"])(Bt,At,Et,!1,null,"a01a09f8",null));qt.options.__file="EditIWordInfo.vue";var Ht=qt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        iTalkList\n                    ")])])],1),a("filter-list",{attrs:{listType:"talk","filter-list":t.filterList,"label-list":t.labelList},on:{filterAllList:t.filterTalkList}}),a("lesson-list",{attrs:{"lesson-type":"talk","type-list":{},"lesson-list":t.talkList,"edit-page":"/showITalkInfo/"},on:{delLessonInfo:t.delLessonInfo,handleCommand:t.handleCommand,releaseTimer:t.releaseTimer}})],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.paginationSize,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.currentId},on:{hideTiming:function(e){t.isShowSetTime=!1},releaseTimer:t.releaseTimer}})],1)],1)},Gt=[],Jt={components:{FilterList:_,ReleaseTiming:zt,LeftAside:$,LessonList:jt},data:function(){return{talkList:[],multipleSelection:[],currentPage:1,isShowSetTime:!1,filterList:{},paginationNum:0,paginationSize:20,labelList:[],currentId:""}},mounted:function(){this.init()},methods:{init:function(){this.getTalkListData(),this.getTalkNumData(),this.getAllLabelData()},getTalkListData:function(){var t=this;this.$axios.get("/italk/_find",{params:{page:this.currentPage,num:this.paginationSize,category:"iTalk"}}).then(function(e){console.log(e),e.data.code||(t.talkList=e.data.data)})},getTalkNumData:function(){var t=this;this.$axios.get("/italk/_getnum",{params:{page:this.currentPage,category:"iTalk"}}).then(function(e){t.paginationNum=e.data.data})},filterTalkList:function(t){var e={page:1,category:t.category||"",enTitle:t.title||"",zhTitle:t.title||"",label:t.label||[],abstract:t.title||"",enVvt:t.title||"",zhVvt:t.title||"",difficulty:t.difficulty||""};this.getTalkListData(e)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getTalkListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key?(this.isShowSetTime=!0,this.currentId=t.value._id):this.postUpdateTalkData(t.value)},postUpdateTalkData:function(t){var e=this,a=new FormData;a.append("lessonId",t._id),a.append("publicTime",parseInt((new Date).getTime()/1e3)),a.append("status",2),this.$axios.post("/italk/_update",a).then(function(t){console.log(t),t.data.code||e.init()})},delLessonInfo:function(t){var e=this;this.$confirm("文件将被直接删除","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button el-button--danger"}).then(function(){e.delLessonData(t)}).catch(function(){})},delLessonData:function(t){var e=this;this.$axios.get("/italk/_delete",{params:{lessonId:t}}).then(function(t){t.data.code||(e.$message({type:"success",message:"已删除"}),e.init())})},getAllLabelData:function(){var t=this;this.$axios.get("/label/_find",{params:{category:"iTalk",all:"all"}}).then(function(e){console.log(e.data.data),e.data.code||(t.labelList=e.data.data)})},hideTimer:function(){this.isShowSetTime=!1,this.init()},releaseTimer:function(t){var e=this;this.$axios.post("/italk/_public",t).then(function(t){t.data.code||(e.$message.success("设置成功"),e.hideTimer())})}}},Kt=Jt,Qt=(a("7e52"),Object(d["a"])(Kt,Yt,Gt,!1,null,"2b83d78e",null));Qt.options.__file="ITalkList.vue";var Xt=Qt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.talkInfo.materialId.zhTitle)+"\n                ")]),a("div",{staticStyle:{float:"right"}},[a("div",[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"small",trigger:"click"},on:{command:t.handleCommand,click:t.postReleaseData}},[t._v("发布\n                            "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{key:"time",value:""}}},[t._v("定时发布")])],1)],1)],1)])],1),a("el-row",{staticClass:"talkInfo"},[a("el-col",{attrs:{span:3}},["ShowIFunInfo"===t.$route.name?a("div",[t._v("英文标题")]):t._e(),"ShowIFunInfo"===t.$route.name?a("div",[t._v("分类")]):t._e(),a("div",[t._v("难度")]),a("div",[t._v("中文字幕")]),a("div",[t._v("英文字幕")]),a("div",[t._v("标签")])]),a("el-col",{attrs:{span:12}},["ShowIFunInfo"===t.$route.name?a("div",[t._v("\n                        "+t._s(t.talkInfo.materialId.enTitle||"--")+"\n                    ")]):t._e(),"ShowIFunInfo"===t.$route.name?a("div",[t._v(t._s(t.iFunTypeList[t.talkInfo.materialId.class]||"--"))]):t._e(),a("div",["simple"===t.talkInfo.materialId.difficulty?a("span",[t._v("初级")]):t._e(),"easily"===t.talkInfo.materialId.difficulty?a("span",[t._v("中级")]):t._e(),"difficulty"===t.talkInfo.materialId.difficulty?a("span",[t._v("高级")]):t._e(),"bonus"===t.talkInfo.materialId.difficulty?a("span",[t._v("彩蛋题")]):t._e(),"other"===t.talkInfo.materialId.difficulty?a("span",[t._v("其他")]):t._e()]),a("div",[t._v("\n                        "+t._s(t.talkInfo.materialId.zhVvt||"--")+"\n                    ")]),a("div",[t._v("\n                        "+t._s(t.talkInfo.materialId.enVvt||"--")+"\n                    ")]),a("div",[t._v(t._s(t.talkInfo.materialId.label||"--"))])])],1),a("show-media",{staticStyle:{width:"732px",height:"403px"},attrs:{"file-info":t.fileInfo,"current-type":t.currentType}}),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.$route.params.id},on:{hideTiming:t.hideTimer,releaseTimer:t.releaseTimer}})],1)],1)],1)},te=[],ee={components:{ReleaseTiming:zt,LeftAside:$,ShowMedia:P},data:function(){return{iFunTypeList:{funny:"搞笑",movie:"电影",entertainment:"娱乐",culture:"文化",travel:"旅行",arts:"艺术",foods:"美食",sports:"运动",technology:"科技"},isShowSetTime:!1,currentType:"",talkInfo:{materialId:{}},url:{ShowIFunInfo:"/ifun/",ShowITalkInfo:"/italk/"},fileInfo:{},mediaInfo:{}}},mounted:function(){this.getOneTalkData()},methods:{jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key&&(this.isShowSetTime=!0)},getOneTalkData:function(){var t=this;this.$axios.get(this.url[this.$route.name]+"_getone",{params:{lessonId:this.$route.params.id}}).then(function(e){e.data.code||(console.log(e.data.data),t.currentType=e.data.data.materialId.fileUrl.substring(e.data.data.materialId.fileUrl.length-3),t.fileInfo=e.data.data.materialId,t.talkInfo=e.data.data)})},hideTimer:function(){this.isShowSetTime=!1},postReleaseData:function(){var t=this,e=new FormData;e.append("lessonId",this.$route.params.id),e.append("publicTime",parseInt((new Date).getTime()/1e3)),e.append("status",2),this.$axios.post(this.url[this.$route.name]+"_update",e).then(function(e){e.data.code||t.$message.success("发布成功")})},releaseTimer:function(t){var e=this;this.$axios.post(this.url[this.$route.name]+"_public",t).then(function(t){t.data.code||(e.$message.success("设置成功"),e.hideTimer())})}}},ae=ee,ie=(a("84a9"),Object(d["a"])(ae,Zt,te,!1,null,"5987f0c4",null));ie.options.__file="ShowITalkInfo.vue";var ne=ie.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("left-aside"),a("el-container",[a("el-main",[a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:5}},[a("div",{staticStyle:{"font-size":"20px",height:"37px"}},[t._v("\n                        iFun\n                    ")])])],1),a("filter-list",{attrs:{listType:"fun",filterList:t.filterList,"label-list":t.labelList},on:{filterAllList:t.filterFunList}}),a("lesson-list",{attrs:{"lesson-type":"fun","type-list":t.iFunTypeList,"lesson-list":t.funList,"edit-page":"/showIFunInfo/"},on:{delLessonInfo:t.delLessonInfo,handleCommand:t.handleCommand}})],1),a("el-footer",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.paginationSize,layout:"total, prev, pager, next",total:t.paginationNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),a("release-timing",{attrs:{isShow:t.isShowSetTime,id:t.currentId},on:{hideTiming:t.hideTimer,releaseTimer:t.releaseTimer}})],1)],1)},se=[],le={components:{FilterList:_,ReleaseTiming:zt,LeftAside:$,LessonList:jt},data:function(){return{iFunTypeList:{funny:"搞笑",movie:"电影",entertainment:"娱乐",culture:"文化",travel:"旅行",arts:"艺术",foods:"美食",sports:"运动",technology:"科技"},funList:[],currentPage:1,isShowSetTime:!1,paginationNum:0,paginationSize:20,filterList:{},currentId:"",labelList:[]}},mounted:function(){this.init()},methods:{init:function(){this.getFunListData(),this.getFunNumData(),this.getAllLabelData()},getFunListData:function(){var t=this;this.$axios.get("/ifun/_find",{params:{page:this.currentPage,num:this.paginationSize,category:"iFun"}}).then(function(e){console.log(e),e.data.code||(t.funList=e.data.data)})},getFunNumData:function(){var t=this;this.$axios.get("/ifun/_getnum",{params:{category:"iFun"}}).then(function(e){t.paginationNum=e.data.data})},filterFunList:function(t){var e={page:1,category:t.category||"",enTitle:t.title||"",zhTitle:t.title||"",label:t.label||[],abstract:t.title||"",enVvt:t.title||"",zhVvt:t.title||"",difficulty:t.difficulty||""};this.getFunListData(e)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.getFunListData()},jumpPage:function(t){this.$router.push(t)},handleCommand:function(t){"time"===t.key?(this.isShowSetTime=!0,this.currentId=t.value._id):this.postUpdateFunData(t.value)},hideTimer:function(){this.isShowSetTime=!1,this.init()},postUpdateFunData:function(t){var e=this,a=new FormData;a.append("lessonId",t._id),a.append("publicTime",parseInt((new Date).getTime()/1e3)),a.append("status",2),this.$axios.post("/ifun/_update",a).then(function(t){console.log(t),t.data.code||e.getFunListData()})},delLessonInfo:function(t){var e=this;this.$confirm("文件将被直接删除","确定删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:"el-button el-button--danger"}).then(function(){e.delLessonData(t)}).catch(function(){})},delLessonData:function(t){var e=this;this.$axios.get("/ifun/_delete",{params:{lessonId:t}}).then(function(t){t.data.code||(e.$message({type:"success",message:"已删除"}),e.init())})},getAllLabelData:function(){var t=this;this.$axios.get("/label/_find",{params:{category:"iFun",all:"all"}}).then(function(e){console.log(e.data.data),e.data.code||(t.labelList=e.data.data)})},releaseTimer:function(t){var e=this;this.$axios.post("/ifun/_public",t).then(function(t){t.data.code||(e.$message.success("设置成功"),e.hideTimer())})}}},re=le,ce=(a("fc09"),Object(d["a"])(re,oe,se,!1,null,"38772092",null));ce.options.__file="IFunList.vue";var de=ce.exports;i["default"].use(m["a"]);var ue=new m["a"]({routes:[{path:"/",name:"MediaList",component:q},{path:"/mediaList",name:"MediaList",component:q},{path:"/editMediaInfo/:id",name:"EditMediaInfo",component:ht},{path:"/editMaterialInfo/:id",name:"EditMaterialInfo",component:xt},{path:"/iWordsList",name:"IWordsList",component:Ot},{path:"/editIWordInfo/:id",name:"EditIWordInfo",component:Ht},{path:"/iTalkList",name:"ITalkList",component:Xt},{path:"/showITalkInfo/:id",name:"ShowITalkInfo",component:ne},{path:"/iFunList",name:"IFunList",component:de},{path:"/showIFunInfo/:id",name:"ShowIFunInfo",component:ne}]}),fe=a("2f62");i["default"].use(fe["a"]);var pe=new fe["a"].Store({state:{},mutations:{},actions:{}}),me=a("bc3a"),he=a.n(me),ge=a("a7fe"),ve=a.n(ge),be=a("2ead"),ye=a.n(be);i["default"].config.productionTip=!1,i["default"].use(o.a),i["default"].use(ve.a,he.a),i["default"].component("VueMarkdown",l.a),i["default"].use(ye.a),he.a.defaults.baseURL="http://188.131.179.172:16000",he.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded",i["default"].prototype.$axios=he.a,new i["default"]({router:ue,store:pe,render:function(t){return t(p)}}).$mount("#app")},"5f7c":function(t,e,a){"use strict";var i=a("55ac"),n=a.n(i);n.a},"65b7":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".textString[data-v-24bb8d13]{font-size:14px;color:#c0c4cc;line-height:21px;padding-top:4px}",""])},6811:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".cutList[data-v-1a734c6c]{padding:40px 0}.videoInfo[data-v-1a734c6c]{margin:40px 0}.addManual[data-v-1a734c6c]{margin-right:15px}.manual[data-v-1a734c6c]{margin-bottom:40px}.manualTitle[data-v-1a734c6c]{color:#a8a8a8;font-size:12px;text-align:left}.manualList[data-v-1a734c6c]{margin-top:10px}",""])},"6ae7":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"ul[data-v-97c47726]{height:-webkit-fill-available}",""])},"6bbd":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".workInfoMain[data-v-a01a09f8]{margin-top:46px;font-size:13px}.workInfoMain p[data-v-a01a09f8]{margin-bottom:8px}.workInfoShow[data-v-a01a09f8]{overflow-y:auto;border:1px solid #dcdfe6;border-radius:5px;min-height:20px}.markdownInfo[data-v-a01a09f8]{padding:5px 15px}.am-form-file[data-v-a01a09f8]{position:relative;overflow:hidden}.am-form-file input[type=file][data-v-a01a09f8]{position:absolute;z-index:1;left:0;opacity:0;width:56px;height:28px;cursor:pointer}",""])},"7b5d":function(t,e,a){"use strict";var i=a("8ef4"),n=a.n(i);n.a},"7e52":function(t,e,a){"use strict";var i=a("b1b8"),n=a.n(i);n.a},"84a9":function(t,e,a){"use strict";var i=a("f6e1"),n=a.n(i);n.a},"84c7":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".table-primary[data-v-d9f45be0]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",""])},"8ef4":function(t,e,a){var i=a("6bbd");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("70c26b98",i,!0,{sourceMap:!1,shadowMode:!1})},"8f30":function(t,e,a){var i=a("e847");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("3ebff826",i,!0,{sourceMap:!1,shadowMode:!1})},"960d":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".sourceInfo[data-v-79f6aab4]{color:#888;font-size:14px;text-align:left;margin:20px 0}.typeTitle[data-v-79f6aab4]{margin-right:15px;font-size:14px}",""])},"99ed":function(t,e,a){var i=a("f87e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("05dcb2b2",i,!0,{sourceMap:!1,shadowMode:!1})},"9b74":function(t,e,a){"use strict";var i=a("480a"),n=a.n(i);n.a},a3a2:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".am-form-file[data-v-59a907a6]{position:relative;overflow:hidden}.am-form-file input[type=file][data-v-59a907a6]{position:absolute;z-index:1;left:0;opacity:0;width:56px;height:28px;cursor:pointer}",""])},a53e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-46f29b94]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-46f29b94]{margin-left:15px}.table-secondary[data-v-46f29b94]{font-size:12px;color:#909399}",""])},a8e1:function(t,e,a){"use strict";var i=a("3e87"),n=a.n(i);n.a},af79:function(t,e,a){var i=a("35a8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("ae4d4078",i,!0,{sourceMap:!1,shadowMode:!1})},b1b8:function(t,e,a){var i=a("20b8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("9f40e22e",i,!0,{sourceMap:!1,shadowMode:!1})},be5f:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".talkInfo[data-v-5987f0c4]{font-size:12px;padding:20px 0}.talkInfo div[data-v-5987f0c4]{margin:15px 0}",""])},bee0:function(t,e,a){"use strict";var i=a("c785"),n=a.n(i);n.a},c64f:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-select[data-v-2df83210]{width:150px;margin:0 5px}",""])},c785:function(t,e,a){var i=a("cb1b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("66601496",i,!0,{sourceMap:!1,shadowMode:!1})},c9c0:function(t,e,a){"use strict";var i=a("2f13"),n=a.n(i);n.a},cb1b:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".backBlock[data-v-1ea5eafe]{padding:20px 20px 10px;margin:0;color:#2c3e50;font-size:14px;cursor:pointer}.backText[data-v-1ea5eafe]{margin-left:10px}.editBlock[data-v-1ea5eafe]{padding:0 20px}aside[data-v-1ea5eafe]{width:200px;height:-webkit-fill-available;border-right:1px solid #e6e6e6}",""])},d36d:function(t,e,a){var i=a("a3a2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("678ac294",i,!0,{sourceMap:!1,shadowMode:!1})},e2a1:function(t,e,a){var i=a("3f8c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("1f50beb8",i,!0,{sourceMap:!1,shadowMode:!1})},e847:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"",""])},ea88:function(t,e,a){"use strict";var i=a("f6ee"),n=a.n(i);n.a},ec13:function(t,e,a){"use strict";var i=a("d36d"),n=a.n(i);n.a},ef94:function(t,e,a){var i=a("6ae7");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("112f284d",i,!0,{sourceMap:!1,shadowMode:!1})},f468:function(t,e,a){"use strict";var i=a("3c58"),n=a.n(i);n.a},f6e1:function(t,e,a){var i=a("be5f");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("d8fe3f88",i,!0,{sourceMap:!1,shadowMode:!1})},f6ee:function(t,e,a){var i=a("84c7");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("b8cd55f2",i,!0,{sourceMap:!1,shadowMode:!1})},f82b:function(t,e,a){var i=a("23fb");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("499e").default;n("15307290",i,!0,{sourceMap:!1,shadowMode:!1})},f836:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".media[data-v-1c6e1092]{width:100%;height:100%;min-height:60px}",""])},f84e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".el-dropdown-link[data-v-4a5c4e50]{cursor:pointer;color:#409eff;font-size:12px}.dropdown-edit[data-v-4a5c4e50]{margin-left:15px}.table-secondary[data-v-4a5c4e50]{font-size:12px;color:#909399}",""])},f87e:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}",""])},fb33:function(t,e,a){"use strict";var i=a("ef94"),n=a.n(i);n.a},fc09:function(t,e,a){"use strict";var i=a("af79"),n=a.n(i);n.a},fc6b:function(t,e,a){"use strict";var i=a("0924"),n=a.n(i);n.a}});
//# sourceMappingURL=app.98198055.js.map